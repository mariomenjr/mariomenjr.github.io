"use strict";(self.webpackChunkmariomenjr=self.webpackChunkmariomenjr||[]).push([[4564],{3905:function(e,n,a){a.d(n,{Zo:function(){return u},kt:function(){return m}});var t=a(7294);function o(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function r(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function s(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?r(Object(a),!0).forEach((function(n){o(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function i(e,n){if(null==e)return{};var a,t,o=function(e,n){if(null==e)return{};var a,t,o={},r=Object.keys(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||(o[a]=e[a]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=t.createContext({}),c=function(e){var n=t.useContext(l),a=n;return e&&(a="function"==typeof e?e(n):s(s({},n),e)),a},u=function(e){var n=c(e.components);return t.createElement(l.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},d=t.forwardRef((function(e,n){var a=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=c(a),m=o,g=d["".concat(l,".").concat(m)]||d[m]||p[m]||r;return a?t.createElement(g,s(s({ref:n},u),{},{components:a})):t.createElement(g,s({ref:n},u))}));function m(e,n){var a=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var r=a.length,s=new Array(r);s[0]=d;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var c=2;c<r;c++)s[c]=a[c];return t.createElement.apply(null,s)}return t.createElement.apply(null,a)}d.displayName="MDXCreateElement"},8215:function(e,n,a){var t=a(7294);n.Z=function(e){var n=e.children,a=e.hidden,o=e.className;return t.createElement("div",{role:"tabpanel",hidden:a,className:o},n)}},5064:function(e,n,a){a.d(n,{Z:function(){return c}});var t=a(7294),o=a(9443);var r=function(){var e=(0,t.useContext)(o.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},s=a(6010),i="tabItem_1uMI",l="tabItemActive_2DSg";var c=function(e){var n,a=e.lazy,o=e.block,c=e.defaultValue,u=e.values,p=e.groupId,d=e.className,m=t.Children.toArray(e.children),g=null!=u?u:m.map((function(e){return{value:e.props.value,label:e.props.label}})),A=null!=c?c:null==(n=m.find((function(e){return e.props.default})))?void 0:n.props.value,b=r(),k=b.tabGroupChoices,f=b.setTabGroupChoices,v=(0,t.useState)(A),h=v[0],y=v[1],D=[];if(null!=p){var N=k[p];null!=N&&N!==h&&g.some((function(e){return e.value===N}))&&y(N)}var S=function(e){var n=e.currentTarget,a=D.indexOf(n),t=g[a].value;y(t),null!=p&&(f(p,t),setTimeout((function(){var e,a,t,o,r,s,i,c;(e=n.getBoundingClientRect(),a=e.top,t=e.left,o=e.bottom,r=e.right,s=window,i=s.innerHeight,c=s.innerWidth,a>=0&&r<=c&&o<=i&&t>=0)||(n.scrollIntoView({block:"center",behavior:"smooth"}),n.classList.add(l),setTimeout((function(){return n.classList.remove(l)}),2e3))}),150))},I=function(e){var n,a=null;switch(e.key){case"ArrowRight":var t=D.indexOf(e.target)+1;a=D[t]||D[0];break;case"ArrowLeft":var o=D.indexOf(e.target)-1;a=D[o]||D[D.length-1]}null==(n=a)||n.focus()};return t.createElement("div",{className:"tabs-container"},t.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":o},d)},g.map((function(e){var n=e.value,a=e.label;return t.createElement("li",{role:"tab",tabIndex:h===n?0:-1,"aria-selected":h===n,className:(0,s.Z)("tabs__item",i,{"tabs__item--active":h===n}),key:n,ref:function(e){return D.push(e)},onKeyDown:I,onFocus:S,onClick:S},null!=a?a:n)}))),a?(0,t.cloneElement)(m.filter((function(e){return e.props.value===h}))[0],{className:"margin-vert--md"}):t.createElement("div",{className:"margin-vert--md"},m.map((function(e,n){return(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==h})}))))}},9443:function(e,n,a){var t=(0,a(7294).createContext)(void 0);n.Z=t},3407:function(e,n,a){a.r(n),a.d(n,{frontMatter:function(){return c},contentTitle:function(){return u},metadata:function(){return p},assets:function(){return d},toc:function(){return m},default:function(){return A}});var t=a(7462),o=a(3366),r=(a(7294),a(3905)),s=a(5064),i=a(8215),l=["components"],c={slug:"2021/08/18/como-consultar-y-persistir-datos-en-mongodb-con--net",title:"C\xf3mo consultar y persistir datos en MongoDB con .NET",author:"Mario Menj\xedvar",author_title:"Software Engineer",author_url:"https://github.com/mariomenjr",author_image_url:"https://avatars3.githubusercontent.com/u/1946936?s=460&v=4",tags:["csharp","mongodb","repository pattern","patr\xf3n de repositorio","dao","data layer"],keywords:["consultar mongodb net","insertar documento mongodb net","crud mongodb net csharp","repository pattern mongodb net","mongodb csharp espa\xf1ol"],date:new Date("2021-08-18T23:31:18.000Z"),description:"En esta entrada, te mostrar\xe9 como implementar una capa de datos siguiendo el patr\xf3n repositorio para consultar y persistir datos a una instalaci\xf3n de MongoDB haciendo uso de C# y el .NET Core Framework.",image:"https://images.unsplash.com/photo-1597852074816-d933c7d2b988?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=512&q=80"},u=void 0,p={permalink:"/blog/2021/08/18/como-consultar-y-persistir-datos-en-mongodb-con--net",editUrl:"https://github.com/mariomenjr/mariomenjr/edit/main/blog/2021-08-18_como-consultar-y-persistir-datos-en-mongodb-con-net.md",source:"@site/blog/2021-08-18_como-consultar-y-persistir-datos-en-mongodb-con-net.md",title:"C\xf3mo consultar y persistir datos en MongoDB con .NET",description:"En esta entrada, te mostrar\xe9 como implementar una capa de datos siguiendo el patr\xf3n repositorio para consultar y persistir datos a una instalaci\xf3n de MongoDB haciendo uso de C# y el .NET Core Framework.",date:"2021-08-18T23:31:18.000Z",formattedDate:"18 de agosto de 2021",tags:[{label:"csharp",permalink:"/blog/tags/csharp"},{label:"mongodb",permalink:"/blog/tags/mongodb"},{label:"repository pattern",permalink:"/blog/tags/repository-pattern"},{label:"patr\xf3n de repositorio",permalink:"/blog/tags/patron-de-repositorio"},{label:"dao",permalink:"/blog/tags/dao"},{label:"data layer",permalink:"/blog/tags/data-layer"}],readingTime:16.66,truncated:!0,authors:[{name:"Mario Menj\xedvar",title:"Software Engineer",url:"https://github.com/mariomenjr",imageURL:"https://avatars3.githubusercontent.com/u/1946936?s=460&v=4"}],nextItem:{title:"Autenticaci\xf3n como servicio con Identity Server 4",permalink:"/blog/2021/07/29/autenticacion-como-servicio-con-identity-server-4"}},d={authorsImageUrls:[void 0]},m=[{value:"MongoDB",id:"mongodb",children:[{value:"Contenedor de Docker",id:"contenedor-de-docker",children:[]}]},{value:"Preparando el ejemplo",id:"preparando-el-ejemplo",children:[{value:"Base de datos",id:"base-de-datos",children:[]},{value:"API en .NET",id:"api-en-net",children:[]},{value:"MongoDB.Driver",id:"mongodbdriver",children:[]}]},{value:"Repository Pattern",id:"repository-pattern",children:[]},{value:"Sample.DAL",id:"sampledal",children:[{value:"Cortana, crea un segundo proyecto",id:"cortana-crea-un-segundo-proyecto",children:[]},{value:"Instalamos MongoDB.Driver, de nuevo",id:"instalamos-mongodbdriver-de-nuevo",children:[]},{value:"Referencia DAL en API",id:"referencia-dal-en-api",children:[]},{value:"Estructura del paquete DAL",id:"estructura-del-paquete-dal",children:[]},{value:"MongoDB, Conexi\xf3n e Interfaz",id:"mongodb-conexi\xf3n-e-interfaz",children:[]},{value:"Entidades",id:"entidades",children:[]},{value:"IService y Manager",id:"iservice-y-manager",children:[]}]},{value:"Dependency Injection",id:"dependency-injection",children:[]},{value:"CRUD",id:"crud",children:[]},{value:"Conclusi\xf3n",id:"conclusi\xf3n",children:[]},{value:"Referencias",id:"referencias",children:[]}],g={toc:m};function A(e){var n=e.components,c=(0,o.Z)(e,l);return(0,r.kt)("wrapper",(0,t.Z)({},g,c,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Se ha escrito much\xedsimo acerca de las ventajas (y desventajas) de las bases de datos NoSQL frente a las SQL. Vagamente, podemos describir a cada uno de estos tipos de bases de datos con una palabra. Flexible, para NoSQL, y Fijo, para SQL. Sin embargo, el tiempo nos ha ense\xf1ado que ambas son meras herramientas que son preferidas para casos espec\xedficos."),(0,r.kt)("p",null,"En esta entrada, te mostrar\xe9 como implementar una capa de datos siguiendo el patr\xf3n repositorio para consultar y persistir datos a una instalaci\xf3n de MongoDB haciendo uso de C# y el .NET Core Framework."),(0,r.kt)("h2",{id:"mongodb"},"MongoDB"),(0,r.kt)("p",null,"Para empezar esta entrada vamos a crear una peque\xf1a base de datos usando MongoDB. Para esto, podemos usar un servicio online llamado ",(0,r.kt)("inlineCode",{parentName:"p"},"MongoDB Atlas")," o una imagen de ",(0,r.kt)("inlineCode",{parentName:"p"},"Docker")," con todo lo necesario para ejecutar nuestra base de datos localmente. Veamos c\xf3mo hacerlo con Docker."),(0,r.kt)("h3",{id:"contenedor-de-docker"},"Contenedor de Docker"),(0,r.kt)("p",null,"Sin duda, esta opci\xf3n se te har\xe1 m\xe1s util si lo que quieres es una instalaci\xf3n local. Si haz usado Docker antes, sabr\xe1s de lo qu\xe9 te estoy hablando. Si no, ve\xe1moslo."),(0,r.kt)("p",null,"El primer paso es instalar Docker, eso depender\xe1 de tu sistema."),(0,r.kt)(s.Z,{groupId:"install-docker",defaultValue:"linux",values:[{label:"Linux",value:"linux"},{label:"macOs",value:"macos"},{label:"Windows",value:"windows"}],mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"linux",mdxType:"TabItem"},(0,r.kt)("p",null,"Por lo general, hay que completar dos pasos para tener Docker listo en cualquier distro Linux. As\xed lo har\xedamos en Manjaro:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Instalar el paquete desde los repositorios")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo pacman -S docker\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Una vez instalado, debemos ",(0,r.kt)("inlineCode",{parentName:"li"},"habilitarlo")," e ",(0,r.kt)("inlineCode",{parentName:"li"},"iniciarlo"),":")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo systemctl start docker\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo systemctl enable docker\n")),(0,r.kt)("p",null,"Ahora puedes ejecutar Docker como ",(0,r.kt)("inlineCode",{parentName:"p"},"root"),". Opcionalmente, puedes agregar tu usuario al grupo de Docker. De este modo, puedes ejecutar contenedores sin necesidad del comando ",(0,r.kt)("inlineCode",{parentName:"p"},"sudo"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo usermod -aG docker $USER\n")),(0,r.kt)("p",null,"And, to make our lives easier, let's install ",(0,r.kt)("inlineCode",{parentName:"p"},"docker-compose"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo pacman -S docker-compose\n"))),(0,r.kt)(i.Z,{value:"macos",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"brew install docker docker-compose docker-machine xhyve docker-machine-driver-xhyve\n")),(0,r.kt)("p",null,"M\xe1s detalles ",(0,r.kt)("a",{parentName:"p",href:"https://pilsniak.com/how-to-install-docker-on-mac-os-using-brew"},"aqu\xed"),".")),(0,r.kt)(i.Z,{value:"windows",mdxType:"TabItem"},(0,r.kt)("p",null,"Sigue las siguientes ",(0,r.kt)("a",{parentName:"p",href:"https://docs.docker.com/docker-for-windows/install/#install-docker-desktop-on-windows"},"instrucciones"),"."))),(0,r.kt)("p",null,"Ya que Docker est\xe1 listo, el siguiente paso es instalar y ejecutar un contenedor que tenga todo lo necesario para alojar una base de datos MongoDB. "),(0,r.kt)("p",null,"Por suerte, existe una ",(0,r.kt)("a",{parentName:"p",href:"https://hub.docker.com/_/mongo"},"imagen oficial")," que cumple con esas caracter\xedsticas. "),(0,r.kt)("p",null,"Para hacer crear un contenedor apartir de esta imagen, seguiremos los pasos en la documentaci\xf3n oficial. Crearemos el siguiente archivo en el directorio que prefieras."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yml",metastring:'title="~/Samples/docker-mongo/docker-compose.yml"',title:'"~/Samples/docker-mongo/docker-compose.yml"'},"# Usa root/password como usuario/contrase\xf1a\nversion: '3.1'\n\nservices:\n\n  mongo:\n    image: mongo\n    restart: always\n    ports:\n      - 27017:27017\n    environment:\n      MONGO_INITDB_ROOT_USERNAME: root\n      MONGO_INITDB_ROOT_PASSWORD: password\n\n  mongo-express:\n    image: mongo-express\n    restart: always\n    ports:\n      - 8081:8081\n    environment:\n      ME_CONFIG_MONGODB_ADMINUSERNAME: root\n      ME_CONFIG_MONGODB_ADMINPASSWORD: password\n      ME_CONFIG_MONGODB_URL: mongodb://root:password@mongo:27017/\n")),(0,r.kt)("p",null,"Una vez creado, es hora de construir nuestro contendor. Para eso, nos posicionamos en el directorio."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cd ~/Samples/docker-mongo\n")),(0,r.kt)("p",null,"Y ejecutamos ",(0,r.kt)("inlineCode",{parentName:"p"},"docker-compose up"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose up\n")),(0,r.kt)("p",null,"Si todo sali\xf3 bien, deber\xedas ver las siguientes l\xedneas:"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"mongo-express_1  | Mongo Express server listening at ",(0,r.kt)("a",{parentName:"p",href:"http://0.0.0.0:8081"},"http://0.0.0.0:8081")," ",(0,r.kt)("br",null),"\nmongo-express_1  | Server is open to allow connections from anyone (0.0.0.0) ",(0,r.kt)("br",null),'\nmongo-express_1  | basicAuth credentials are "admin:pass", it is recommended(...) ',(0,r.kt)("br",null))),(0,r.kt)("p",null,"Si llevas tiempo desarrollando software, seguro recordar\xe1s a PhpMyAdmin. La imagen oficial de ",(0,r.kt)("em",{parentName:"p"},"MongoDB")," provee un servicio muy parecido llamado ",(0,r.kt)("inlineCode",{parentName:"p"},"Mongo Express"),", dir\xedgete a ",(0,r.kt)("a",{parentName:"p",href:"http://localhost:8081"},"http://localhost:8081")," para acceder."),(0,r.kt)("h2",{id:"preparando-el-ejemplo"},"Preparando el ejemplo"),(0,r.kt)("h3",{id:"base-de-datos"},"Base de datos"),(0,r.kt)("p",null,"Al acceder a ",(0,r.kt)("em",{parentName:"p"},"Mongo Express"),", lo primero que haremos ser\xe1 crear una base de datos."),(0,r.kt)("figure",{class:"md-captioned-image"},(0,r.kt)("img",{src:a(9254).Z,alt:"Mongo Express"}),(0,r.kt)("figcaption",null,"Instancia local de Mongo Express.")),(0,r.kt)("figure",{class:"md-captioned-image"},(0,r.kt)("img",{src:a(9306).Z,alt:"DB Created"}),(0,r.kt)("figcaption",null,"Base de datos creada.")),(0,r.kt)("p",null,"En el siguiente paso crearemos una collecci\xf3n."),(0,r.kt)("figure",{class:"md-captioned-image"},(0,r.kt)("img",{src:a(8069).Z,alt:"Collection Created"}),(0,r.kt)("figcaption",null,"Creating Collection.")),(0,r.kt)("p",null,"Y por \xfaltimo el primer documento, siguiendo un esquema sencillo. \xdanicamente una propiedad: ",(0,r.kt)("inlineCode",{parentName:"p"},"username"),"."),(0,r.kt)("figure",{class:"md-captioned-image"},(0,r.kt)("img",{src:a(5112).Z,alt:"Document Created"}),(0,r.kt)("figcaption",null,"Nuevo documento creado.")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"En este ejemplo, tenemos que crear un usuario distinto a ",(0,r.kt)("inlineCode",{parentName:"p"},"root")," para poder consultar y persistir datos desde la aplicaci\xf3n a trav\xe9s MongoDB.Driver para .NET. La forma m\xe1s sencilla de logralo es a trav\xe9s de ",(0,r.kt)("a",{parentName:"p",href:"https://robomongo.org/"},"Robo 3T"),".")),(0,r.kt)("figure",{class:"md-captioned-image"},(0,r.kt)("img",{src:a(3816).Z,alt:"Sample->Users"}),(0,r.kt)("figcaption",null,"Click derecho en Sample->Users.")),(0,r.kt)("h3",{id:"api-en-net"},"API en .NET"),(0,r.kt)("p",null,"Lo siguiente que haremos ser\xe1 crear una API en .NET para poder consumir la base de datos a trav\xe9s de endpoints. En realidad podr\xeda ser un proyecto de consola, una librer\xeda, o lo qu\xe9 tu quieras."),(0,r.kt)(s.Z,{groupId:"dotnet-webapi",defaultValue:"cli",values:[{label:".NET CLI",value:"cli"}],mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"cli",mdxType:"TabItem"},(0,r.kt)("p",null,"Primero creamos el directorio de la soluci\xf3n."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir ~/Samples/dotnet-webapi/Sample.API && cd ~/Samples/dotnet-webapi/Sample.API\n")),(0,r.kt)("p",null,"Una vez ah\xed, creamos el proyecto API de ",(0,r.kt)("inlineCode",{parentName:"p"},"dotnet"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"dotnet new webapi\n")),(0,r.kt)("p",null,"Ahora creamos una soluci\xf3n, para que nuestro proyecto sea amigable con un IDE (en mi caso, Rider)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cd .. & dotnet new sln -n Sample\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},'The template "Solution File" was created successfully.')),(0,r.kt)("p",null,"Y a\xf1adimos nuestro reci\xe9n creado proyecto ",(0,r.kt)("inlineCode",{parentName:"p"},"Sample.API")," a la soluci\xf3n."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"dotnet sln add Sample.API/Sample.API.csproj\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},'The template "Solution File" was created successfully.')),(0,r.kt)("p",null,"Ejecutamos nuestro proyecto para asegurarnos que hicimos todo bien."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"dotnet run --project Sample.API\n")),(0,r.kt)("p",null,"Deber\xedas ver una lista JSON en ese enlace: ",(0,r.kt)("a",{parentName:"p",href:"https://localhost:5001/WeatherForecast"},"https://localhost:5001/WeatherForecast"),"."))),(0,r.kt)("h3",{id:"mongodbdriver"},"MongoDB.Driver"),(0,r.kt)("p",null,"Por \xfaltimo, instalaremos el driver oficial de MongoDB para .NET con el cu\xe1l podremos consultar e insertar datos. Haz click en el siguiente ",(0,r.kt)("a",{parentName:"p",href:"https://www.nuget.org/packages/MongoDB.Driver/"},"link")," para determinar la \xfaltima versi\xf3n estable y poder ejecutar el comando de abajo."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"dotnet add Sample.API/Sample.API.csproj package MongoDB.Driver -v {VERSION}\n")),(0,r.kt)("p",null,"Una vez instalado, crearemos un nuevo endpoint para conectarnos a MongoDB y validar la instalaci\xf3n."),(0,r.kt)("p",null,"El primer paso es crear un controlador llamado ",(0,r.kt)("inlineCode",{parentName:"p"},"ApiController"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"touch Sample.API/Controllers/ApiController.cs\n")),(0,r.kt)("p",null,"Con el siguiente contenido:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Sample.API/Controllers/ApiController.cs"',title:'"Sample.API/Controllers/ApiController.cs"'},'using System.Linq;\nusing Microsoft.AspNetCore.Mvc;\nusing MongoDB.Driver;\n\nnamespace Sample.API.Controllers\n{\n    [Route("[controller]")]\n    [ApiController]\n    public class ApiController : ControllerBase\n    {\n        [HttpGet, Route("[action]")]\n        public JsonResult GetUsers()\n        {\n            var client = new MongoClient("mongodb://mariomenjr:mariomenjr@localhost:27017/sample");\n            var database = client.GetDatabase("sample");\n\n            var users = database.GetCollection<object>("users");\n            var datos = users.AsQueryable().Select(s => s);\n\n            return new JsonResult(datos);\n        }\n    }\n}\n')),(0,r.kt)("p",null,"Al dirigirnos al nuevo endpoint, veremos que nuestro \xfanico usuario registrado es devuelto en formato JSON."),(0,r.kt)("figure",{class:"md-captioned-image"},(0,r.kt)("img",{src:a(5262).Z,alt:"Consulta Users MongoDB"}),(0,r.kt)("figcaption",null,"Consultando colecci\xf3n Users de MongoDB.")),(0,r.kt)("h2",{id:"repository-pattern"},"Repository Pattern"),(0,r.kt)("p",null,"Con nuestra base de datos y API listas, el siguiente paso para consumir nuestra base de datos es crear nuestro repositorio."),(0,r.kt)("p",null,"El ",(0,r.kt)("em",{parentName:"p"},"Repository Pattern")," (o, Patr\xf3n de Repositorio en espa\xf1ol) es una estrategia en desarrollo de software para abstraer el acceso de datos en nuestra aplicaci\xf3n. En palabras m\xe1s simples, es el c\xf3digo que tiene como responsabilidad exclusiva el consultar y guardar datos en una aplicaci\xf3n."),(0,r.kt)("p",null,"Sin capa de abstracci\xf3n, podr\xedamos encontrarnos que el c\xf3digo de interacci\xf3n con la base de datos es parte de la l\xf3gica de negocio de tu aplicaci\xf3n."),(0,r.kt)("figure",{class:"md-captioned-image"},(0,r.kt)("img",{src:a(2749).Z,alt:"Non Repository Diagram"}),(0,r.kt)("figcaption",null,"Diagrama de acceso a datos sin una capa de abstracci\xf3n.")),(0,r.kt)("p",null,"Algo similar a esto:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Sample.API/Controllers/ApiController.cs"',title:'"Sample.API/Controllers/ApiController.cs"'},'// ... M\xe9todo GetUsers  \n\n// highlight-start \n// C\xf3digo para conectarnos a la base de datos\nvar client = new MongoClient("mongodb://mariomenjr:mariomenjr@localhost:27017/sample");\nvar database = client.GetDatabase("sample");\n// highlight-end\n\n// highlight-start \n// C\xf3digo de consulta de datos\nvar users = database.GetCollection<object>("users");\nvar datos = users.AsQueryable().Select(s => s);\n// highlight-end\n\n// C\xf3digo de aplicaci\xf3n que devuelve datos como JSON\nreturn new JsonResult(datos);\n\n// ...\n')),(0,r.kt)("p",null,"Podr\xedas argumentar que esta pieza de c\xf3digo ",(0,r.kt)("em",{parentName:"p"},"hace el trabajo"),", \xbfPor qu\xe9 querr\xedamos abstraerlo? Claro, es una pregunta v\xe1lida. Hay muchas razones por las qu\xe9 nos conviene m\xe1s tener una capa dedicada al acceso a datos que repetir c\xf3digo por todos lados."),(0,r.kt)("figure",{class:"md-captioned-image"},(0,r.kt)("img",{src:a(7960).Z,alt:"Repository Diagram"}),(0,r.kt)("figcaption",null,"Diagrama de acceso a datos con el Patr\xf3n de Repositorio")),(0,r.kt)("p",null,"En primera, las aplicaciones nunca est\xe1n terminadas. Siempre habr\xe1 una actualizaci\xf3n por hacer. Por ejemplo, \xbfQu\xe9 pasa si agregas un nuevo campo a la tabla ",(0,r.kt)("inlineCode",{parentName:"p"},"Users"),"? Tendr\xedas que reescribir cada parte de tu aplicaci\xf3n d\xf3nde accedas a estos datos. Esto implica no solo la reescritura, pero una revalidaci\xf3n de toda la aplicaci\xf3n. Nada bonito, cr\xe9eme."),(0,r.kt)("h2",{id:"sampledal"},"Sample.DAL"),(0,r.kt)("p",null,"Si has trabajado con .NET antes, seguro habr\xe1s escuchado la palabra DAL. Aunque no es propia de este lenguaje de programaci\xf3n, es muy com\xfan ver esta abstracci\xf3n en proyectos con esta tecnolog\xeda. No es raro ver soluciones con m\xe1s de un proyecto, y uno de los cu\xe1les lleve en su nombre el sufijo ",(0,r.kt)("inlineCode",{parentName:"p"},".DAL")," o ",(0,r.kt)("inlineCode",{parentName:"p"},"Data Access Layer")," (o ",(0,r.kt)("em",{parentName:"p"},"capa de acceso a datos")," en espa\xf1ol)."),(0,r.kt)("p",null,"Por lo general, las soluciones de .NET que implementan un proyecto .DAL consumen datos de una base de datos en Microsoft SQL Server. En nuestro caso, haremos algo muy parecido pero con MongoDB. Let's have fun."),(0,r.kt)("h3",{id:"cortana-crea-un-segundo-proyecto"},"Cortana, crea un segundo proyecto"),(0,r.kt)("p",null,"Vamos a crear un segundo proyecto dentro de nuestra soluci\xf3n, ser\xe1 nuestra ",(0,r.kt)("inlineCode",{parentName:"p"},"DAL"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir Sample.DAL && dotnet new classlib\n")),(0,r.kt)("p",null,"Y ahora lo a\xf1adimos a nuestra soluci\xf3n."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cd .. && dotnet sln add Sample.DAL/Sample.DAL.csproj\n")),(0,r.kt)("h3",{id:"instalamos-mongodbdriver-de-nuevo"},"Instalamos MongoDB.Driver, de nuevo"),(0,r.kt)("p",null,"Esta vez en nuestro proyecto DAL. Para mayor detalle, ",(0,r.kt)("a",{parentName:"p",href:"#mongodbdriver"},"MongoDB.Driver"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"dotnet add Sample.DAL/Sample.DAL.csproj package MongoDB.Driver -v {VERSION}\n")),(0,r.kt)("h3",{id:"referencia-dal-en-api"},"Referencia DAL en API"),(0,r.kt)("p",null,"Nuestra API debe ser capaz de consumir nuestro proyecto DAL."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"dotnet add Sample.API/Sample.API.csproj reference Sample.DAL/Sample.DAL.csproj\n")),(0,r.kt)("h3",{id:"estructura-del-paquete-dal"},"Estructura del paquete DAL"),(0,r.kt)("p",null,"Nuestro paquete ",(0,r.kt)("em",{parentName:"p"},"DAL")," tendr\xe1 la siguiente estructura. En el directorio ",(0,r.kt)("inlineCode",{parentName:"p"},"Mongo"),", escribiremos c\xf3digo necesario para conectarnos a la base de datos y para proveer un ancla en nuestro proyecto, el API. Por otro lado, el directorio ",(0,r.kt)("inlineCode",{parentName:"p"},"Repository")," albergar\xe1 c\xf3digo necesario por consumir datos de cada colecci\xf3n."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u251c Sample.DAL\n\u2502 \u251c Mongo\n| | \u251c Extensions\n| | \u251c Connections\n\u2502 \u251c Repository\n| | \u251c Managers\n| | \u251c IServices\n| \u251c Entidades // Podr\xedamos crear un tercer proyecto apartir de este directorio, por simplicidad lo dejaremos aqu\xed.\n")),(0,r.kt)("p",null,"Empecemos por crear los dos directorios con mayor jerarqu\xeda en este proyecto."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir Sample.DAL/Mongo && mkdir Sample.DAL/Repository && mkdir Sample.DAL/Entidades\n")),(0,r.kt)("p",null,"Y luego todos los dem\xe1s."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir Sample.DAL/Mongo/Extensions && mkdir Sample.DAL/Mongo/Connections \\\n&& mkdir Sample.DAL/Repository/Managers && mkdir Sample.DAL/Repository/IServices\n")),(0,r.kt)("h3",{id:"mongodb-conexi\xf3n-e-interfaz"},"MongoDB, Conexi\xf3n e Interfaz"),(0,r.kt)("p",null,"Empezamos por la configuraci\xf3n, el par de archivos ",(0,r.kt)("inlineCode",{parentName:"p"},"IMongoSettings.cs")," y ",(0,r.kt)("inlineCode",{parentName:"p"},"MongoSettings.cs")," nos ayudar\xe1 a contener el nombre de la base de datos y la cadena de conexi\xf3n."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Sample.DAL/Mongo/Connections/IMongoSettings.cs"',title:'"Sample.DAL/Mongo/Connections/IMongoSettings.cs"'},"namespace Sample.DAL.Mongo.Connections\n{\n    public interface IMongoSettings\n    {\n        public string DatabaseName { get; set; }\n        public string ConnectionString { get; set; }\n    }\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Sample.DAL/Mongo/Connections/MongoSettings.cs"',title:'"Sample.DAL/Mongo/Connections/MongoSettings.cs"'},"namespace Sample.DAL.Mongo.Connections\n{\n    public class MongoSettings : IMongoSettings\n    {\n        public string DatabaseName { get; set; }\n        public string ConnectionString { get; set; }\n    }\n}\n")),(0,r.kt)("p",null,"Conforme la base de datos crezca, cada colecci\xf3n estar\xe1 formada de propiedades con un significado espec\xedfico. Es muy importante mantener un modelo de cada colecci\xf3n en la base datos. En C#, esto lo lograremos creando una clase que refleje los miembros de cada colecci\xf3n y nos permita manipular estos datos de manera sencilla."),(0,r.kt)("p",null,"A pesar de que estos modelos pueden variar much\xedsimo uno del otro, con MongoDB tenemos la certeza de que siempre existir\xe1 una propiedad ",(0,r.kt)("inlineCode",{parentName:"p"},"_id")," en cada colecci\xf3n. Propia de c\xf3mo MongoDB organiza los datos. Es por esto que el siguiente paso en el desarrollo de la DAL es crear un ",(0,r.kt)("em",{parentName:"p"},"tipo de dato")," que asuma la existencia de esta propiedad y nos de la pauta de identificar un modelo de cualquier otro tipo de dato."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Sample.DAL/Entidades/IDocument.cs"',title:'"Sample.DAL/Entidades/IDocument.cs"'},"using System;\nusing MongoDB.Bson;\nusing MongoDB.Bson.Serialization.Attributes;\n\nnamespace Sample.DAL.Entidades\n{\n    public interface IDocument\n    {\n        [BsonId]\n        [BsonRepresentation(BsonType.String)]\n        public ObjectId Id { get; set; }\n\n        public DateTimeOffset CreatedOn { get; }\n    }\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Sample.DAL/Entidades/Document.cs"',title:'"Sample.DAL/Entidades/Document.cs"'},"using System;\nusing MongoDB.Bson;\n\nnamespace Sample.DAL.Entidades\n{\n    public abstract class Document : IDocument \n    {\n        public ObjectId Id { get; set; }\n\n        public DateTimeOffset CreatedOn => Id.CreationTime.ToLocalTime();\n    }\n}\n")),(0,r.kt)("p",null,"Una pieza cr\xedtica del patr\xf3n de repositorio es el poder definir una plantilla de los m\xe9todos y propiedades que ser\xe1n necesarios para poder consultar o persistir datos en cada colecci\xf3n de MongoDB. Para eso, definimos la interfaz ",(0,r.kt)("inlineCode",{parentName:"p"},"IMongoRepository<TDocument>"),". En ella, daremos forma a nuestro repositorio de datos."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Sample.DAL/Mongo/Connections/IMongoRepository.cs"',title:'"Sample.DAL/Mongo/Connections/IMongoRepository.cs"'},"using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Linq.Expressions;\nusing System.Threading.Tasks;\n\nusing Sample.DAL.Entidades;\n\nnamespace Sample.DAL.Mongo.Connections\n{\n    public interface IMongoRepository<TDocument> where TDocument : IDocument\n    {\n        // highlight-start\n        IQueryable<TDocument> AsQueryable();\n\n        IEnumerable<TDocument> FilterBy(\n            Expression<Func<TDocument, bool>> filterExpression);\n\n        IEnumerable<TProjected> FilterBy<TProjected>(\n            Expression<Func<TDocument, bool>> filterExpression,\n            Expression<Func<TDocument, TProjected>> projectionExpression);\n\n        TDocument FindOne(Expression<Func<TDocument, bool>> filterExpression);\n\n        Task<TDocument> FindOneAsync(Expression<Func<TDocument, bool>> filterExpression);\n\n        TDocument FindById(string id);\n\n        Task<TDocument> FindByIdAsync(string id);\n        \n        IEnumerable<TDocument> Find();\n\n        Task<IEnumerable<TDocument>> FindAsync();\n\n        void InsertOne(TDocument document);\n\n        Task InsertOneAsync(TDocument document);\n\n        void InsertMany(ICollection<TDocument> documents);\n\n        Task InsertManyAsync(ICollection<TDocument> documents);\n\n        void ReplaceOne(TDocument document);\n\n        Task ReplaceOneAsync(TDocument document);\n\n        void DeleteOne(Expression<Func<TDocument, bool>> filterExpression);\n\n        Task DeleteOneAsync(Expression<Func<TDocument, bool>> filterExpression);\n\n        void DeleteById(string id);\n\n        Task DeleteByIdAsync(string id);\n\n        void DeleteMany(Expression<Func<TDocument, bool>> filterExpression);\n\n        Task DeleteManyAsync(Expression<Func<TDocument, bool>> filterExpression);\n        // highlight-end\n    }\n}\n")),(0,r.kt)("p",null,"Antes de implementar la plantilla, crearemos un atributo que nos permitir\xe1 definir el nombre de la colecci\xf3n para nuestro repositorio."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},"using System;\n\nnamespace Sample.DAL.Mongo.Connections\n{\n    [AttributeUsage(AttributeTargets.Class, Inherited = false)]\n    public class BsonCollectionAttribute : Attribute\n    {\n        public string CollectionName { get; }\n\n        public BsonCollectionAttribute(string collectionName)\n        {\n            this.CollectionName = collectionName;\n        }\n    }\n}\n")),(0,r.kt)("p",null,"Ya que tenemos este atributo y la plantilla, es hora de implementarla. Vamos a empezar por el ",(0,r.kt)("inlineCode",{parentName:"p"},"constructor")," que es d\xf3nde configuraremos la conexi\xf3n a la base de datos."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Sample.DAL/Mongo/Connections/MongoRepository.cs"',title:'"Sample.DAL/Mongo/Connections/MongoRepository.cs"'},'using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Linq.Expressions;\nusing System.Threading.Tasks;\nusing Sample.DAL.Mongo.Settings;\n\nusing Identity.Entities.Utils.Attributes;\nusing MongoDB.Bson;\nusing MongoDB.Bson.Serialization.Conventions;\nusing MongoDB.Driver;\n\nnamespace Sample.DAL.Mongo.Connections\n{\n    public class MongoRepository<TDocument> : IMongoRepository<TDocument> where TDocument : IDocument\n    {\n        // highlight-start\n        private readonly IMongoCollection<TDocument> _collection;\n\n        /* \n         * Setups connection to MongoDB\n         *\n         **/\n        public MongoRepository(IMongoSettings settings)\n        {\n            // Aplica la nomenclatura `camelCase` al momento de parsear el Modelo\n            ConventionRegistry.Register("camelCase", new ConventionPack {new CamelCaseElementNameConvention()}, t => true);\n            \n            // Configura un MongoClient y la conexi\xf3n a la base de datos\n            var client = new MongoClient(settings.ConnectionString);  // mongodb://mariomenjr:mariomenjr@localhost:27017/sample\n            var database = client.GetDatabase(settings.DatabaseName); // sample\n            \n            // Configura el manejador de la colecci\xf3n\n            var collectionName = this.GetCollectionName(typeof(TDocument));\n            this._collection = database.GetCollection<TDocument>(collectionName);\n        }\n\n        /* \n         * Gets the collection name from a Model\n         *\n         **/\n        private protected string GetCollectionName(Type documentType)\n        {\n            return ((BsonCollectionAttribute) documentType.GetCustomAttributes(\n                    typeof(BsonCollectionAttribute),\n                    true)\n                .FirstOrDefault())?.CollectionName;\n        }\n        // highlight-end\n        // ...\n    }\n}\n')),(0,r.kt)("p",null,"Una vez tenemos la conexi\xf3n configurada, es hora de cubrir los m\xe9todos de interacci\xf3n con la base de datos. Nos referimos al CRUD. Crear, leer, actualizar y eliminar, por sus siglas en ingl\xe9s."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Sample.DAL/Mongo/Connections/MongoRepository.cs"',title:'"Sample.DAL/Mongo/Connections/MongoRepository.cs"'},"        // ...\n        // highlight-start\n        public virtual IQueryable<TDocument> AsQueryable()\n        {\n            return _collection.AsQueryable();\n        }\n\n        public virtual IEnumerable<TDocument> FilterBy(\n            Expression<Func<TDocument, bool>> filterExpression)\n        {\n            return _collection.Find(filterExpression).ToEnumerable();\n        }\n\n        public virtual IEnumerable<TProjected> FilterBy<TProjected>(\n            Expression<Func<TDocument, bool>> filterExpression,\n            Expression<Func<TDocument, TProjected>> projectionExpression)\n        {\n            return _collection.Find(filterExpression).Project(projectionExpression).ToEnumerable();\n        }\n\n        public virtual TDocument FindOne(Expression<Func<TDocument, bool>> filterExpression)\n        {\n            return _collection.Find(filterExpression).FirstOrDefault();\n        }\n\n        public virtual Task<TDocument> FindOneAsync(Expression<Func<TDocument, bool>> filterExpression)\n        {\n            return Task.Run(() => _collection.Find(filterExpression).FirstOrDefaultAsync());\n        }\n\n        public virtual TDocument FindById(string id)\n        {\n            var objectId = new ObjectId(id);\n            var filter = Builders<TDocument>.Filter.Eq(doc => doc.Id, objectId);\n            return _collection.Find(filter).SingleOrDefault();\n        }\n\n        public virtual Task<TDocument> FindByIdAsync(string id)\n        {\n            return Task.Run(() =>\n            {\n                var objectId = new ObjectId(id);\n                var filter = Builders<TDocument>.Filter.Eq(doc => doc.Id, objectId);\n                return _collection.Find(filter).SingleOrDefaultAsync();\n            });\n        }\n\n        public virtual IEnumerable<TDocument> Find()\n        {\n            return _collection.Find(Builders<TDocument>.Filter.Empty).ToList();\n        }\n\n        public virtual Task<IEnumerable<TDocument>> FindAsync()\n        {\n            return Task.Run(() =>\n            {\n                return _collection.Find(Builders<TDocument>.Filter.Empty).ToListAsync().ContinueWith(task => task.Result.AsEnumerable());\n            });\n        }\n\n        public virtual void InsertOne(TDocument document)\n        {\n            _collection.InsertOne(document);\n        }\n\n        public virtual Task InsertOneAsync(TDocument document)\n        {\n            return Task.Run(() => _collection.InsertOneAsync(document));\n        }\n\n        public void InsertMany(ICollection<TDocument> documents)\n        {\n            _collection.InsertMany(documents);\n        }\n\n        public virtual async Task InsertManyAsync(ICollection<TDocument> documents)\n        {\n            await _collection.InsertManyAsync(documents);\n        }\n\n        public void ReplaceOne(TDocument document)\n        {\n            var filter = Builders<TDocument>.Filter.Eq(doc => doc.Id, document.Id);\n            _collection.FindOneAndReplace(filter, document);\n        }\n\n        public virtual async Task ReplaceOneAsync(TDocument document)\n        {\n            var filter = Builders<TDocument>.Filter.Eq(doc => doc.Id, document.Id);\n            await _collection.FindOneAndReplaceAsync(filter, document);\n        }\n\n        public void DeleteOne(Expression<Func<TDocument, bool>> filterExpression)\n        {\n            _collection.FindOneAndDelete(filterExpression);\n        }\n\n        public Task DeleteOneAsync(Expression<Func<TDocument, bool>> filterExpression)\n        {\n            return Task.Run(() => _collection.FindOneAndDeleteAsync(filterExpression));\n        }\n\n        public void DeleteById(string id)\n        {\n            var objectId = new ObjectId(id);\n            var filter = Builders<TDocument>.Filter.Eq(doc => doc.Id, objectId);\n            _collection.FindOneAndDelete(filter);\n        }\n\n        public Task DeleteByIdAsync(string id)\n        {\n            return Task.Run(() =>\n            {\n                var objectId = new ObjectId(id);\n                var filter = Builders<TDocument>.Filter.Eq(doc => doc.Id, objectId);\n                _collection.FindOneAndDeleteAsync(filter);\n            });\n        }\n\n        public void DeleteMany(Expression<Func<TDocument, bool>> filterExpression)\n        {\n            _collection.DeleteMany(filterExpression);\n        }\n\n        public Task DeleteManyAsync(Expression<Func<TDocument, bool>> filterExpression)\n        {\n            return Task.Run(() => _collection.DeleteManyAsync(filterExpression));\n        }\n        // highlight-end\n    }\n}\n")),(0,r.kt)("p",null,"Con esto, tenemos listo el esqueleto de nuestro repositorio de datos. El siguiente paso es aplicarlo a cada colecci\xf3n."),(0,r.kt)("h3",{id:"entidades"},"Entidades"),(0,r.kt)("p",null,"Para poder crear un repositorio, necesitamos los modelos. En nuestro caso, solo tenemos una colecci\xf3n por lo qu\xe9 solo crearemos un modelo."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Sample.DAL/Entidades/User.cs"',title:'"Sample.DAL/Entidades/User.cs"'},'using Sample.DAL.Mongo.Connections;\n\nnamespace Sample.DAL.Entidades\n{\n    [BsonCollection("users")]\n    public partial class User : Document\n    {\n        public string Username { get; set; }\n    }\n}\n')),(0,r.kt)("h3",{id:"iservice-y-manager"},"IService y Manager"),(0,r.kt)("p",null,"Para terminar de configurar nuestro repositorio basta con aplicar lo qu\xe9 ya escribimos en el archivo ",(0,r.kt)("inlineCode",{parentName:"p"},"Sample.DAL/Mongo/Connections/MongoRepository.cs")," a cada colecci\xf3n. Es aqu\xed d\xf3nde definiremos el c\xf3mo accederemos o modificaremos la base de datos. C\xf3mo buena pr\xe1ctica, crearemos para cada colecci\xf3n una plantilla y una implementaci\xf3n, o en otras palabras un ",(0,r.kt)("inlineCode",{parentName:"p"},"IService")," y un ",(0,r.kt)("inlineCode",{parentName:"p"},"Manager"),"."),(0,r.kt)("p",null,"En nuestra base de datos de MongoDB solo tenemos una colecci\xf3n, por lo qu\xe9 ser\xe1 muy sencillo implementar este par."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Sample.DAL/Repository/IServices/IUserService.cs"',title:'"Sample.DAL/Repository/IServices/IUserService.cs"'},"using Sample.DAL.Entidades;\nusing Sample.DAL.Mongo.Connections;\n\nnamespace Sample.DAL.Repository.IServices\n{\n    public interface IUserService : IMongoRepository<User>\n    {}\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Sample.DAL/Repository/Managers/UsersManager.cs"',title:'"Sample.DAL/Repository/Managers/UsersManager.cs"'},"using Sample.DAL.Entidades;\nusing Sample.DAL.Mongo.Connections;\nusing Sample.DAL.Repository.IServices;\n\nnamespace Sample.DAL.Repository.Managers\n{\n    public class UserManager : MongoRepository<User>, IUserService\n    {\n        public UserManager(IMongoSettings settings) : base(settings)\n        {}\n    }\n}\n")),(0,r.kt)("h2",{id:"dependency-injection"},"Dependency Injection"),(0,r.kt)("p",null,"Antes de configurar la inyecci\xf3n de dependencias tenemos que instalar un paquete de extensiones para la configuraci\xf3n. El paquete se encuentra en el repositorio de NuGet. Revisa cu\xe1l es la \xfaltima versi\xf3n disponible en este ",(0,r.kt)("a",{parentName:"p",href:"https://www.nuget.org/packages/Microsoft.Extensions.Options.ConfigurationExtensions/"},"enlace")," y ejecuta el siguiente comando. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"dotnet add Sample.DAL/Sample.DAL.csproj package Microsoft.Extensions.Options.ConfigurationExtensions --version {VERSION}\n")),(0,r.kt)("p",null,"Lleg\xf3 la hora de crear una extensi\xf3n propia de nuestro paquete. Dejaremos toda la complejidad aqu\xed, y en nuestra API simplemente llamaremos a un m\xe9todo."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Sample.DAL/Mongo/Extensions/MongoExtension.cs"',title:'"Sample.DAL/Mongo/Extensions/MongoExtension.cs"'},"using Microsoft.Extensions.Configuration;\nusing Microsoft.Extensions.DependencyInjection;\nusing Microsoft.Extensions.Options;\nusing Sample.DAL.Mongo.Connections;\nusing Sample.DAL.Repository.IServices;\nusing Sample.DAL.Repository.Managers;\n\nnamespace Sample.DAL.Mongo.Extensions\n{\n    public static class MongoExtension\n    {\n        public static IServiceCollection AddMongoDb(this IServiceCollection services, IConfigurationSection mongoSettings)\n        {\n            services.Configure<MongoSettings>(mongoSettings);\n            \n            services.AddSingleton<IMongoSettings>(srvProvider =>\n                srvProvider.GetRequiredService<IOptions<MongoSettings>>().Value);\n            \n            services.AddTransient<IUserService, UserManager>();\n\n            return services;\n        }\n    }\n}\n")),(0,r.kt)("p",null,"Y en nuestra API, configuramos lo siguiente:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Sample.API/Startup.cs"',title:'"Sample.API/Startup.cs"'},'    // ...\n    public void ConfigureServices(IServiceCollection services)\n    {\n        // highlight-start\n        services.AddMongoDb(Configuration.GetSection("MongoSettings"));\n        // highlight-end\n        // ...\n')),(0,r.kt)("p",null,"Para que lo anterior tenga sentido, agregamos esto al archivo ",(0,r.kt)("inlineCode",{parentName:"p"},"appsettings.json"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'  // ...\n  // highlight-start\n  "MongoSettings": {\n    "ConnectionString": "mongodb://mariomenjr:mariomenjr@localhost:27017/sample",\n    "DatabaseName": "sample"\n  }\n  // highlight-end\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Por ning\xfan motivo debemos compartir estas credenciales en alg\xfan controlador de version p\xfablico. Para un proyecto, recomiendo leer sobre ",(0,r.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/aspnet/core/security/app-secrets?view=aspnetcore-5.0"},(0,r.kt)("inlineCode",{parentName:"a"},"secrets.json")))),(0,r.kt)("p",null,"Por \xfaltimo, inyectamos la dependencia en el API."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Sample.API/Controllers/ApiController.cs"',title:'"Sample.API/Controllers/ApiController.cs"'},'// ...\nnamespace Sample.API.Controllers\n{\n    [Route("[controller]")]\n    [ApiController]\n    public class ApiController : ControllerBase\n    {\n        // highlight-start\n        private readonly IUserService _userService;\n        \n        public ApiController(IUserService userService)\n        {\n            this._userService = userService;\n        }\n        // highlight-end\n        // ...\n')),(0,r.kt)("h2",{id:"crud"},"CRUD"),(0,r.kt)("p",null,"Una vez hemos implementado el patr\xf3n de repositorio para acceder y persistir datos, un CRUD es tan sencillo como lo siguiente."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},'        // ...\n        // highlight-start\n        [HttpGet, Route("[action]")]\n        public JsonResult GetUsers()\n        {\n            return new JsonResult(this._userService.Find());\n            // highlight-end\n\n            // Este es el c\xf3digo que nos permiti\xf3 consultar la lista de usuario al inicio del Post.\n            // Ya no lo necesitamos y podemos borrarlo.\n\n            var client = new MongoClient("mongodb://mariomenjr:mariomenjr@localhost:27017/sample");\n            var database = client.GetDatabase("sample");\n            \n            var users = database.GetCollection<object>("users");\n            \n            return new JsonResult(users.AsQueryable().Select(s => s));\n            // highlight-start\n        }\n\n        [HttpPost, Route("[action]")]\n        public JsonResult AddUser(string username)\n        {\n            var newUser = new User {Username = username};\n            this._userService.InsertOne(newUser);\n            \n            return new JsonResult(newUser);\n        }\n        \n        [HttpPut, Route("[action]")]\n        public JsonResult UpdateUser(string oldUsername, string newUsername)\n        {\n            var user = this._userService.FindOne(x => x.Username == oldUsername);\n            user.Username = newUsername;\n            \n            this._userService.ReplaceOne(user);\n            \n            return new JsonResult(user);\n        }\n        \n        [HttpDelete, Route("[action]")]\n        public JsonResult DeleteUser(string username)\n        {\n            this._userService.DeleteOne(x => x.Username == username);\n            \n            return new JsonResult(username);\n        }\n        // highlight-end\n        //...\n')),(0,r.kt)("p",null,"Listo, ya tenemos una interfaz para consultar y persistir datos en la colecci\xf3n ",(0,r.kt)("em",{parentName:"p"},"Users"),"."),(0,r.kt)("figure",{class:"md-captioned-image"},(0,r.kt)("img",{src:a(4892).Z,alt:"CRUD"}),(0,r.kt)("figcaption",null,"CRUD para colecci\xf3n Users")),(0,r.kt)("h2",{id:"conclusi\xf3n"},"Conclusi\xf3n"),(0,r.kt)("p",null,"Espero que este post te haya sido de mucha ayuda. Despu\xe9s de implementar el patr\xf3n de repositorio, es muy sencillo escalar cualquier consulta a la base de datos. No necesitamos conocer ning\xfan detalle de conexi\xf3n, ya que eso es manejado propiamente por esta nueva capa."),(0,r.kt)("p",null,"La ventaja de esto es que si la base de datos sufre alg\xfan cambio, no debemos ir a cada parte de la aplicaci\xf3n para implementarlos. \xdanicamente nuestro paquete DAL sufrir\xe1 los cambios. Reduciendo ambos el tiempo de programaci\xf3n y pruebas."),(0,r.kt)("h2",{id:"referencias"},"Referencias"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.mongodb.com/drivers/csharp/"},"MongoDB C#/.NET Driver")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://makingloops.com/why-should-you-use-the-repository-pattern/"},"The WHY Series: Why should you use the repository pattern?")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.mongodb.com/blog/post/quick-start-c-and-mongodb--read-operations"},"Quick Start: C# and MongoDB - Read Operations")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/dotnet/core/tutorials/library-with-visual-studio-code"},"Tutorial: Create a .NET class library using Visual Studio Code"))))}A.isMDXComponent=!0},6010:function(e,n,a){function t(e){var n,a,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(a=t(e[n]))&&(o&&(o+=" "),o+=a);else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function o(){for(var e,n,a=0,o="";a<arguments.length;)(e=arguments[a++])&&(n=t(e))&&(o&&(o+=" "),o+=n);return o}a.d(n,{Z:function(){return o}})},5262:function(e,n,a){n.Z=a.p+"assets/images/007-ApiGetUsers-f455d5ad9ca1f8af801fe3d424119d96.png"},8069:function(e,n,a){n.Z=a.p+"assets/images/007-collection-created-b08ad966d3d1a1ab7e2ad4fc8f46dcbb.png"},3816:function(e,n,a){n.Z=a.p+"assets/images/007-create-user-e0f4b4669de0a4e5dea4057ff1a66193.png"},4892:function(e,n,a){n.Z=a.p+"assets/images/007-crud-a26f6f8f7e7d0e1b623185ffef325526.png"},9306:function(e,n,a){n.Z=a.p+"assets/images/007-db-created-5cef02fef34aeb1f6a624c2faace941e.png"},9254:function(e,n,a){n.Z=a.p+"assets/images/007-mongo-express-cfcabbb7dab1925a2a85a7c86adaadf5.png"},5112:function(e,n,a){n.Z=a.p+"assets/images/007-new-document-3dcfc7e77ff08a9f0c32160c7ebf5833.png"},2749:function(e,n){n.Z="data:image/png;base64,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"},7960:function(e,n){n.Z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAnsAAACHCAIAAADhmQiLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAgAElEQVR4Xu3dX4zcVvk38CeTTer0ovFbELUEKK64qAW06xRBXVVVvLQh5gLiqC3124vWkSp1EEKdSgjmBmVyVf9EIVZvaqGIdakQJpWaKVwwFxVrkFBd/mgdVah+JUTcChG/QmT9IsS6uxvPe+Gdjccz45lmN14n+X6uMuccHz8Znz1n/Occ7+n3+zTZ+vr63Nzcnj17ihk5ly9fvvPOO4upA/1+f2NjY9++fcWMnLW1tf379xdTcxBGHsLIQxh5CCMPYeQhjLzdCqOR/wAAAADXCUZcAACAKmDEBQAAqAJGXAAAgCpgxAUAAKgCRlwAAIAqzK2vrxfThm1sbBSThqVpOrWS7RdAGHkIIw9h5CGMPISRhzDydiWMubm5ufzngo2NjUaj0WiUnQo3Go2SStI0TdO0pAARra+vlxdAGHkIIw9h5CGMPISRhzDydiuMKVOAiajRaEwtU1Kg0WikaVpSIDO1AMLIQxh5CCMPYeQhjDyEkbcrYZSN8AAAALBTMOICAABUASMuAABAFTDiAgAAVAEjLgAAQBUw4gIAAFQBIy4AAEAVMOICAABUASMuAABAFfasrKwU03LSNG2UroNFRC+99NJf/vKXYmpOv98vX5hj+wWI6MqVK3v37i2m5kytZPsFqE5hPPXUU4qiFDMGph7Z7RcgotXV1QMHDhRTc6ZWsv0CRPTyyy8vLy8XU3OmfqXbL0B1ahs1CeOxxx47fvx4MWNg6pHdfgGqTRO1LOudd94ppuZM/Uq3X4Dq1DZqEsbXvva1J554opgxMPXIjhaYY1k2/7kgWxayPLI//elPBw4ceOihh4oZsHtee+21v//975MObr/f39jY2LdvXzEjZ21tbf/+/cXUnFnaRpqmk2KgCsPwfX9tbW1hYaGYAbvHcZz3339/UvOorG3UpIm+++67//nPf44dO1bMgN3zxhtv/PWvf53UPK6tbZStwjy7L3/5y9/+9reLqbB7yn8v34Iefvjh73znO8VU2D3vvvtuMenW9uCDD6KJ1srf/va3YtK2lZ0RAwAAwE7BiAsAAFAFjLgAAABVwIgLAABQBYy4AAAAVcCICwAAUAWMuAAAAFWY6/f7xbRho6tmwA2h3+9POrhpmhLRpNwtUwvM0jZKKqkyDKghNFGov0kH99raxtzGxkb+86g0TbOq4caSpmn5wS3PpRkKTG0bU2OgGfYytcDUMKCepjaP8lyaocDUtjE1BpphL1MLTA0D6mlq8yjPpZECc+WLVM2yPhnU0969eycd3P5s65OVF5ilbTQajZJKKgsD6glNFGqupHlcW9vAhQ4AAIAqYMQFAACoAkZcAACAKmDEBQAAqAJGXAAAgCpgxAUAAKgCRlwAAIAqYMQFAACoAkZcAACAKsytra0V04atr68Xk+BGcOXKlfKDW55LMxSY2jbSNJ1ayfYLTA0D6glNFGpux5vo3P79+/OfC7A+2Y1r7969kw7ujOuTTdo8M0vbaDQaJZVUFgbUE5oo1NyON1FcVQYAAKgCRlwAAIAqYMQFgFtaGIbFJIDrAyMuANzS7r777pMnTxZTAa4DjLhwfe3Zs8e27WIqQJ0sLy8vLCzEcVzMANhRGHHhumu1WjiHgDpzXffgwYOHDx/2fb+YB7BzMOLCdef7/vLy8uHDh3EOAfXEsmy3233mmWcWFhZwSQauH4y4cN3xPO+67vz8/N13341zCKitTqezuLjYarVOnz5dzAPYCRhxoQosy9q2ferUKZxDQJ2pquq67uLi4okTJ3BJBnbc3NTlxzY2NopJcCO4cuVK+cEtz6UZCkxtG2maUq6eb33rW5/61KeeffbZ5eXll156KUucupepBaaGcS0i3w1ZSeKZYgYREYW2qti86ZgKV8zaEnebak/pWipbzLkGvql2qNNticWMG1kNmygRfe5zn/vjH//4+OOPy7L8+uuv8zw/dS9TC0wNA+opTdPyg1ueSyMF5ubm5vKfCzY2NhqNRqOBU+EbT6PRmHRw0zRN03RSbmZ9fb28wCxtI8vN1/PYY4995jOfOXny5De+8Y2zZ8/ecccd5XvZkTCuQdxrK4boBcaYIS7xjVZXsrttqXQsZUStxU4YsT+yOPB9utlOuerZRIno4x//uOu6J0+e/NKXvvT6668/8sgj+dyCHQkD6mnHm2hjTykiajSml4EaKh6nnOyPv5g6bJYCM7aNQuLhw4dd111ZWXn00UcvXLhQyC0Y3bxg9jB2TMJIrZbMJslQYhT4fhAlREkcRQkRMZwgCdzWiBuHvuf54dBGceh7nueHE4fSOPA9L4iGNqJsZ6XbTag5iQJvpL5xgWUFRxN9z/ODeHTzYp2zKR6nnN1tohnbtn/0ox8dPXr01VdfLeblTNp8y+xhQA0VD9XAtTXRsvEZ4DphWdZ13VardfTo0fPnz8uyXCxRU4lvaWonFGSRjTw3lqyurfJEgaUo7ZCXBYpIkmLL13y3ydia4GiB2+SSwNLUTshJXOL7iWL3LIVLfEtVO5EgC0zoeZuJQ/uKe01Z6zGKzMchcUxCfJbstlXdSUSZT3wv5Dvdri4MbTeh5sQzFM2KBZGLPJ/Vna4hs+MCo6jbVFsuI0lc7HmRZPZslaO415L1LiuJbBL6Adt0em2JmfBt3ER0Xb/33nsfffTR3/72t4uLi8VsgI+qX2ptbS1N02LqsGPHjr388svFVNhVjz/++A9+8INi6kCapmtra8XUYR9++GExadgsbeNf//pXSRtL0/Ts2bNEZJpmMW9gR8I4ceLEiy++WEwttbJ47LZ7vrdcSL34ypGD899bXs2KnH/yrrue+fVqf+X8k3cdeubXK/1+v7+69Pw9t9125JVL/f6lV44c3PrHAy++1+/3+/1LP3/yngdeXO73l1958viLS1lNF888cNuRMxezfQy89+L8bQ9sJq78+plDdNdzS/3+6tvP33PX8Z9f6vf7/f7q8ovzB48tZh+2jK/5vRfnDx5bvJilvnLs0LFXLo4NbOX8k3fd81z2n+mvLj13T/ZfXDx2cBBM/9KvX/zez9+b9G3M6umnnz59+nQxdaA+TXRtbe3ixYvz8/OiKK6sZN/LkB0J46mnnvr+979fTIVd9c1vfvO73/1uMXXg2pooznFhNz399NNf+MIXZFn2ff/MmTMsW3pndLfFXs/nZEPMrhSziirFHTcg1vMTsSOzRESMrKuC5eW3SjzX52QzOxHlNCfQiIio6XTjwHN7UZwkIVEUDV8Ajn0v4GWZJyIiVlalgy4RUeC6oaBxoeeFREScyHo9L9HV3O1icVzNkdsLBHWzOr7ZC5tESXdMYK7lJXyLDTyPiIgRhMTs+aQIAhdYbYNrqrIkKG2DiGJn7LehjLnzfd34vv/mm28WUweuXLmSXc4tZuSsrq4Wk0bwPJ9dkrn77ruXlpZEscr/ItxUMOLCRGEYvv/++8XUgY2Njb1795Z3Z//+97+LSSNEUQzDUJblhYWFpaWlOg+6SRwnDLcVH8OyTBLHlMQJsexgzON4lhkaceM4Tpit7IHAUpROJKqKwLPsmJugSRznKmUG/0yimMKuaWztQVSKz2+NrTkeqm4rbTSwOI6TsGsY7iBBlgSGSDTdnm2aVtPUQ0bSDcvU2PHfRqW63a5t2zzPFzOIiKjf75e3TyLa2Ng4fvx4MXVENr3NNM2FhYUzZ87oul4sATADjLgwkW3b2+/Ojhw5UkwdwbKs7/u6rtf8HILlOCa+ei4aR1HCyhyxLJMEcUzEEhGFxYeIWJbNbZXEYZRwfGB2fMkKHJUlosh2O35+EyJiWJaubhVHUZxwRMRyHAlNu6tP/F3ijq2Z5bjsZJcjIkqiMGI4blxgHMeyYttxlOJPBE7SDUc3KAm7TUVvOXJ3/LdRNV3XO51OMZWIBk+KlrfSy5cv33nnncXUCVqtFs/zuq5fuHDhzJkzxWyAaap8YD0OPNePiqkDsduSRNUKRn/t5/imqprFvukaxd2m3OxW/Jt8FnUKTNd1d4K33npraWmpmDrsl7/8peu6xUonyJbIOHz4cH2WyEiuIiJiJFVOulYvOzah43i8IgskyBLrOd2QiCi0zV6hjTNybqvQVkXF9ImutvOoZ9g+be5iCyvKYuh2vYSIKHRsN0sWFFXwbMvPCodOU227haYytmZOVqXQsbyEiBK/o4qaHY0NTFQVxrWcMKvKtzTV9BLyLVU1slgYXpQ4SpJkwrdxk8uWyFhaWqrzEhlxkPsjvLbnyD+y0NbktvvR91Sn7q4CVZ7jBpamhEbc1Yq/noko6raNpNXtanwxZwgvN5ubj2xuWxIFfiB+9BZy3e3oPM4bS6vVEkVRVdVanEP8n/958MD/bH069PzboalZlqc1RYHjmCgiyXA6EhEpHUvVmiJn8LygtHSx17taCRGxmmV7WlPgWZaiRGg7bYkYpi0ouigKLDFSxzBCtaUrvNO7usSFoJudrqbwXZ5jWFlT+WyUFVuOGWiq4HAcRSFJHbtwVVlqja+5aVmepvICx8YRyYbT5InhxwRGhtPWdYk3eS4JI1YxHIkhUnRO03ib49kkihKxY2s8sfzYb+OmJ4qi67qqqi4sLCwuLn72s58tlthtnqGqriALLGX9XMgoZtcpPNO+w+IoKE5Gm8nUfjh0WhZnGPLN0SNWOeKWSBJOa+ssxQnl7ivFoR/GLC9mf+UsxzIML4q0VSCJgqxAbtZjlkbDiXlJ5PshccLmAx9b4tAPomTCdnEUEcuxSegHEXGimBsPsx0yw4m50OMoIm5wtysJfT9KGE4Q+Vw3Wfh/MJwg5W6vlQZ285Fl2XVdXdcXFhbOnz9/++23F0tUgtV7iV5MJCJONV3ViKOYWO7qMeJV01UshiEiCgyRWJYlYppu3NzcSjHdcHgrseVGzThKmCxBjbSEsgoGWKnthq2rRdpZMiPotq8nxRC2MBNr1mxfS+IoZritljQmMGKlVjdoFXbAq5anmnEUJ0xur+O/jVvA1vS2hYWFc+fOHT16tFhit7GK0bPk7N+hJQtt09UHn8d3kpsdDScIuc4piYIgjKnQY+XEoR9ExI/cCMrSWUEQxjeMCf1wtr+r3V0SB65je7IeigLPbqYEQa5EZmzwdVSDETfqtVS9S5LMk+/5XMvptiSG4l5L1hySJC6JOYnzbNaKLNlrSzrZoSVT3GspzS4JAhP6Id/pdpsiE/Wait5jJIlPAjfgOr1eUxjeV2ApcicSZYGJYpbbmskfOprSDnhJZKNsAqOZPXia38yT9cT3GTbx3UAwvF6Tp/EzFyl0NKXpsbLIRokgMY4r9HxDpNDRlZbHyRIXe24oGNk8yjGzJJOr8zhv+vmOY2XnELquHz58+Ny5c1/84heLJXYZw3Jc/nNoyaLJm3ZH4aJex4rksT/Ii1sRMWyuzxgebgeGiuSMVjZkYs3jthuXNjZxXNqk1FuBaZo8z3/lK185f/68qqrF7NrgOG6rDYzvJANLUYxIEHkmDrxINHuOxs8w89szZNVMJFlIooRjk82TocS3NNUIRUmg0PPZzR49b3w/HHttVXUSUeIp9Hxqdt225Nstw/1/cdhqJp1uW/QNVbM2S3ikOj1TZscHX1dz5bci0jSdujhZv98vJn0EidtpOpzpdzWOiAJDEluW6rUSq20xHd9rCUShrYivkja8Vbvp8GbgqCwlflvWjJ7myL4bSYZr6TxR0tN53eg1bSW/VbfTCRTbtxWWKDRlwSEioshuNgPV9QyRIYq7mtDsaIE5fH2Mid1A8F2DJwpNSbC7YbPFdltNV7Q9S2GJErcpau2eYiue0e7xZtDTOUp8Q5ZikogodlpNV3KyfSduS1TbttLVY7NpMB3f13mi0FJkw2nKW3+5od1qh9pQYD3FHnmkZYLV1dWSgzv1yKZpmt1anFTJ1BqI6MMPP5y0eaakEtu2DcM4evTor371q3vvvbeYPVBSw5Y0TYtJO4pvOt2kY7Y1i1he7PQ62i06BH1ESZKUNI+pR3bXm+gHH3zwk5/85POf/3z5myhLatiy4000CXpON2YoiSPfsQLF6MpERPHYTtKzTF+2QlthiBLf7rhhTFzQadqskfXMiW9IcstWenquZUdOx4i1nm9KDCVeW3owEYiIArPZjtu+3+Qp+zHaMhWvnRurJ/TD2S+ArtMUichrCYrRbXa1ltV0xF6z29NZ8ttNg1q+1+KJKLKVrKemMcHv2IluefOYemRHC8yVT8aY5WG/8txpgp4bie3BajuCIvOG68U6eQEvbz6Gwau63GrltiEKPC+S2pszIEXDC4iISDG6cuS7vV6cJGHCxMnW86ODrfxY7Gze9uIVRWj3iCjxeh4raImfzUBkRSHsugFJwz/nSNIUnoiIeJ7PHtEMe+NmLgq+H4l69swmI+q61LGIiPyeR7K9eerMyKrEaK5PSjg6S5IiykyY/TnrfMcDBw5MOrj9fn9jY2Pfvn3FjJy1tTWGYYiyK6RjzNI20jSdtDlNCyOO43feeefQoUOf/vSnSyqZJYzyv4qdwMktSx5uozAVwzCTjmx528jsbhP1fX9hYeH48eM//vGP9+/fX8zOmSWMHW+iSeR1s+ffkjhmWC6KYuJZYsd2krwoUNtoWYmuyJKoGyIR+VNnfvuuz0ibp6+MpMqHzIiIIrfn8yIXeV6Ubcf7rhe1hatD9fh+mBip3bWjzYnkccwkcRQP9d+h5wWCOrjKx8mK2Ox6IWljgt8xt91226TmUdI2tqytrRXaxq5fVY7jJP9Xx3Bs4sVJQjGxW1P9WK54kyiJYoZhCl/E5kJ0iioJHBtGSf5gZQXiJLfVYIpjHMdJHNqGsbU7RRw9RWGyv20iyi6dJNmGozMX4yShqzsZ3N5K4iTO3+piWCaOsl/4xVmSWybM/rwl+L5/4sSJ+fn5X/ziF5/4xCeK2QC7yrbtkydPLi4u6rq+trZWzK4BVu44g/u2FPd0UW1ygaPR2E6S0x2XNU3b0Npawist027LU2d+J0kS5/unzWdP4jimyLWMcNCt8aow3BOP74cp8QxFtRJZlUWOjeIk99B9ZniKOrFs1tuOC77Y9dfHro+4HM8mbhxtzhOkOIwZjmOZhKU4iih7LjkOwyjhcxsRy7FJsLVVHAUxIzCOYVHLd7PrF25o2VF+EyJiWSYJt8574zB7aJ5lWYZVjG7hOvJ042cuhi6bXeViiYiizZ0wLMtlC9xvDsBxzLEsM26WJD+oacLsz5tft9s9efLk888/3+l06tmdwa3s5MmT58+fX1pakm+U9cBZUeJjyw9J9iZ0koygti21TRR7hqroHSlsTpv5zbAMG8fxZp+WRNn7O4jjOIaXzW7+OvKw8f1w0jWMUO0GlswQUWA4Vndoq+xSxtXekqI43ry6MRq8KQ9tWSM7fCljBoUpjoKi8J7tBEREFLt2L5ZViWFFWQx7jpcQUewZtnf1AWXa3ErwbCdIiCh227LU6uXnnCWBZbnxyBRHQZZYv9uNiIhi184mUBIja0rStbJkij1D0+wsnCnGz1zkJZEPut0goWw+5GZVkiqzrr25k6hru6ysSmNnSWbliSbN/rzJnT59Wtf1M2fOTFrW4Fazk3PQb0bvv//+byf43e9+V0wa8fvf/973Z/164zheWFhYXl72fb/uw+1W75fEQbdjeZykCPnTxlwnGfdasr7ZkbGiJLCUzDLzW5BFcp0sMerZm7msrIqBY21+inottbnZ7Q2M74fzfXXomE6U+x9k/+IUVQodO5sWnvhdJxBVhRsbfH1VfI774Zv/+38d2Pp027HFqKd3HEPXFN7muCSKONV2NI6Ia5pGT1O4LsfzUktTOSNXCxGJHdvQNFmwOIojVrW6GsdHLd3UZcHhGYbTTasZqG2lxbqmOviRxigdU1GbAm/yLCPoqsx4lBBxqul4elPkOzwbhzGvWc5M4xojj525KLXNptaUeIvnebmly45NRMQopt3SmpJgcmwcxXzTdhSGiNdHZ0luNWtu/OzPm1Ucxy+88EK2qkZtl52q3tQ343pmM1Cs6zvZsq5Ylj19+vT2l0yZ5fHPrTsd58+fn3Rvrz7+76tfPfAqERHddvCQIKl2z5AZInVsJ/mmpsa6xBs8x8RRxCqmIxPRtJnfnGYaXUUTBJ5jWFFTxV6YEBHftG1f0wWB45koTISW1eGGthvfD7NKq2lqquAJLLGKabUDxdA0rmtLstBuiUKv0+s2LcvXNKHHcRRFjGzZTZ4YVlOt0eBra+udBmPN8taLnXl30OrKpUsrQy8eWV0dfFw9/+TB0fe49Pv9/upKcaOhasa/yGRkT5tWL03ImKIs9EuLxw4eeeViLqtYNktduXRpNHXTaP3T7ci7g06dOlVsLtekWPVAPoyLFy+Kojg/P194PcvoyzcKZmmi1/DuoOtt5eLy22+/vXxxzLtoMivvLb/99nuXVvtLzx069NzSVnJhu9VLS8/P3/Pc+YuXtlLG1bx66b3lt99efu+jtqPr6AZ6d1C/389G2VOnThVL7FAYVb47aFInuboyrgec1v2M9MGbVlculXRq/Qn98FD/ePUfK/mSYyMaH/z23NTvDipM6kvcpqAFmm21BPItw+XV7rjf8COzFYerGc4bmDR9kOEmZExRCD12VKFNbdvU+Ng1TE/UTf5qbm71gZzSKY2lmddTp9MpubQ7yxOYly9f/tjHPlZMHeG67okTJ44fP779k5UbwIT31+ZMeDNu6GhKy+ckkY39zXmHTK/TdoKQMZpJbNk6jZvzPfbVtkP7g3KnT58+c+aMbdt1nnQ7u0md5PiOZnzqVSN98KZp243vh4f6x61/MUOXFMbWPDaxhmoz4hYwstkzOx2zqcbEiZo9Moe6vljN7iUdw9CdhOHFZs8pLsMBQ/KPfRbzbkqB5zJNx2vLTDa523DaSovPF7DaNtMJvBZPFPd08RfZY4Oh5yaK5ZkqSxTbCt+xfM1QrU7XabFmz5QodtQxc77Vnmkzbd/NJjH2DDMMR6a+wQRxHJ88edL3fdzpgB1R1xGXiBE0w9GKqTcEVtRNRy+mwhjPPvvsm2++uby8fAt1Z2PfX5sz4c24xGtWVwl9txfGSRIRE0fR1Y2IJs351se82hZmEYbhiRMn7rjjDt/363/jFm4IjcJV5gIimnoHolgl1EPxOOVkC9wUU4fNUmDGtlFM7ff7/f7Kysr999/v+/7y8vL8/Hwxe2DS5ltmD6MuAkvhBc1wXC8INmdGDJnwZlwKHV0QlLbd84IgDLaWKN2SxEnM5uYrMiwTJ0lCkun22rxvNWWe5eVm9oR/LRSPU86uN9GlpaXDhw/fd999b7311sGDB4vZOWM3z5s9DKih4qEauLYmOrexsVHcw7A0TbOq4caSpmn5wS3PpRkKTG0bWe5oPRcuXHjiiScefvjhH/7whyzLjhbIK8+lGcKolfHvr82Z8GZc3zIczgizdfaSrm/0ctsQEU2Y8000+mrbocX6dk9tm+hPf/rTZ5999uzZs08//fRo7qipBaaGAfW04010rnyRqlmejoF62rt376SD259tfbLyArO0jWztukI9tm2/8MILzz///KlTp6oJo16unmJuvr9WGD7pZEVZDO2ul0gSs/lm3OzuSjLYNvZMy6NESrLRldmcuCipMqvb3UjVuMGcb0si31I7cdtpS8zmq22dwjT13VPPJpotcJHd6agsDKinRqMx6eBeW9uo731cuCnlH/vs35IX0ya9v3bam3HFZltxWqJgcwyJLdPUNL0lt1m3pUiJrvKebvvm2Dnf415tC+NkC1z0+33f93meL2YDbBtGXKhI9tjn8vLyLf7Y5+T3124Z/2ZcXu+G2tVEPRwssNcNlcGdX7ndC9qDt0lv1jb+1bZQsPVmAtM08ZwUXCfVr/IIt6KsO1tZWfF9/1YebgeGxr6Jb8YdHR6HEwf/uvp0VfZx5M0fRAzLjUmFTbZtLywsnDp1yrZtDLdw/WDEhevOdd2FhYUjR464rovuDGqo1WotLi62Ci8FBdhpuKoM193CwsIttMAF3GieeeaZVquFSy9QAYy4cH3Nz8/bto3uDGrLtu1iEsD1gREXrq/ZX4UGAHBzw31cAACAKmDEBQAAqMLc2tpaMW3Y+vp6MQluBFeuXCk/uOW5NEOBqW0jTdOplWy/wNQwoJ7QRKHmdryJzu3fvz//uQDrk9249u7dO+ngzrg+2aTNM7O0jUajUVJJZWFAPaGJQs3teBPFVWUAAIAqYMQFAACoAkZcAACAKmDEBQAAqAJGXAAAgCpgxAUAAKgCRlwAAIAqYMQFAACoAkZcAACAKsxNXX5sY2OjmAQ3gitXrpQf3PJcmqHA1LaRpunUSrZfYGoYUE9oolBzU5tHeS6NFJibmyt7Yd/Gxkaj0Wg0cCp842k0GpMObpqmaZpOys2sr6+XF5ilbZTEQBWGAfVU0jwqaxslMVCFYUA9lTSPa2sb01f7bDQaU8tADe3Zs2fSgWs0GmmaTsrdMrXALG2jpECVYUANoYlC/U06cNfWNvCzCwAAoAoYcQEAAKqAERcAAKAKGHEBAACqgBEXAACgChhxAQAAqoARFwAAoAoYcQEAAKqAERcAAKAKc3EcF9Ny0jSdujhZmqZnz579zW9+U8yoVr/fn7r8RwVqEsYf/vCH++67r+TgTj2y2y9ARB9++GFJDDRDJdsvQERpmr722mvvvPNOMaNaNWkbNQnjz3/+8yc/+cmS5jH1yG6/ANWpiZ47d+7dd98tZlSrJm2jJmFcuHDh61//eknzmHpkRwvs6ff7+c8F2bKQ5f/5n/3sZ//85z+LqQP9fj9N07179xYzcq5cuTK1QGPaMmn//e9/b7/99mLqwC0YhqIo999/fzGDiIj6/f7Gxsa+ffuKGTlra2v79+8vpubM0jYuX7585513FlMHKgvj3Llz//jHP4qpA1UelJq0jZqE8cgjj7yM5qYAAAGYSURBVDzwwAPFDCKqsG3UpIm+8cYbH3zwQTF1oMqDUpO2UZMwjhw58tBDDxUziOha20bZKswz+upXv1qHJluTv5wbIoxbzaOPPlrybdTkoCCMW5ksyyXfRk0OCsLYvrIzYgAAANgpGHEBAACqgBEXAACgChhxAQAAqoARFwAAoAoYcQEAAKqAERcAAKAKc/3SFTBo3KoZo0oqSdOUSgtkphZAGHkIIw9h5CGMPISRhzDydiWMuY2NjfznUWmaZlVPkqbp1Eq2XwBh5CGMPISRhzDyEEYewsjblTDmylfumGVhjkajUVJJf7b1QcoLIIw8hJGHMPIQRh7CyEMYebsVxpRzagAAANgRGHEBAACqgBEXAACgChhxAQAAqoARFwAAoAoYcQEAAKqAERcAAKAKGHEBAACqgBEXAACgCnNra2vFtGHr6+vFpGFpmk6tZPsFEEYewshDGHkIIw9h5CGMvF0JY27//v35zwUzLoVVUsmMS2GV1EAIYxjCyEMYeQgjD2HkIYy83QoDV5UBAACqgBEXAACgCv8f19b/EW6ndmcAAAAASUVORK5CYII="}}]);