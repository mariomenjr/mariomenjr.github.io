<!doctype html> <html lang=es> <head> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-174920898-1"></script> <script> window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-174920898-1'); </script> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <meta content=website property=og:type> <base href=/ > <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.ico rel="shortcut icon" type=image/ico> <link href=client/main.2592917502.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>Blog | Mario Menjívar</title><meta content="Blog by Mario Menjívar" name=description><meta content="blog,javascript,software,aprender programación,,mariomenjr,mario,menjivar,mario menjivar" name=keywords><noscript id=sapper-head-end></noscript> </head> <body class="text-gray-900 antialiased bg-gray-50 box-border overflow-x-hidden"> <div id=sapper> <div class="box-border min-h-screen min-w-screen"><div class="flex justify-between flex-col h-100" style=visibility:hidden><div><header class=px-4><div class="container mx-auto mt-2 px-2 py-5 sm:px-1 sm:py-3"><div class="flex flex-row items-center justify-between"><div class=inline-block><a href=/ ><div class="flex flex-row items-center"><img alt=@mariomenjr class="rounded-full sm:w-16 w-12" src="https://avatars3.githubusercontent.com/u/1946936?s=460&v=4"> <div class="flex flex-col ml-3"><span class="font-bold sm:text-xl text-grey-800 text-lg">Mario Menjívar</span> <span class="font-light text-grey-600 text-left text-xs">@mariomenjr</span></div></div></a></div> <div class=inline-block><div class="flex flex-row items-center"><a href=https://twitter.com/mariomenjr target=_blank><svg class="text-gray-900 fill-current h-6 w-6" viewBox="0 0 50 50" xmlns=http://www.w3.org/2000/svg><path d="M50.063 10.438a20.57 20.57 0 01-5.91 1.62 10.309 10.309 0
          004.523-5.687 20.648 20.648 0 01-6.531 2.492 10.258 10.258 0
          00-7.504-3.246c-5.68 0-10.286 4.602-10.286 10.281 0 .805.094 1.59.27
          2.344-8.547-.43-16.121-4.523-21.195-10.746a10.243 10.243 0 00-1.39
          5.172c0 3.566 1.812 6.715 4.573 8.562a10.274 10.274 0
          01-4.66-1.289v.13c0 4.984 3.547 9.136 8.246 10.085a10.29 10.29 0
          01-4.644.172c1.312 4.082 5.11 7.063 9.605 7.145A20.613 20.613 0 012.39
          41.87c-.831 0-1.648-.047-2.449-.144a29.053 29.053 0 0015.762
          4.62c18.914 0 29.258-15.667 29.258-29.253
          0-.446-.012-.895-.027-1.332a20.904 20.904 0 005.129-5.325z"></path></svg></a> <span class=w-5></span> <a href=https://linkedin.com/in/mariomenjr target=_blank><svg class="text-gray-900 fill-current h-6 w-6" viewBox="0 0 50 50" xmlns=http://www.w3.org/2000/svg><path d="M41 4H9C6.24 4 4 6.24 4 9v32c0 2.76 2.24 5 5 5h32c2.76 0 5-2.24
          5-5V9c0-2.76-2.24-5-5-5zM17 20v19h-6V20h6zm-6-5.53c0-1.4 1.2-2.47
          3-2.47s2.93 1.07 3 2.47c0 1.4-1.12 2.53-3 2.53-1.8 0-3-1.13-3-2.53zM39
          39h-6V29c0-2-1-4-3.5-4.04h-.08C27 24.96 26 27.02 26
          29v10h-6V20h6v2.56S27.93 20 31.81 20c3.97 0 7.19 2.73 7.19 8.26V39z"></path></svg></a></div></div></div></div></header> <nav class="px-4 border-b mt-2"><div class="container mx-auto"><div class="flex flex-row items-center justify-between"><ul class="flex flex-row items-center space-x-8"><li class="px-2 border-gray-900 py-3"><a href=/blog class="text-gray-900 font-light hover:text-black text-sm tracking-wide uppercase font-medium">blog</a> </li> </ul><ul class="flex flex-row items-center space-x-8"><li class="px-2 border-gray-900 py-3"><a href=/contacto class="text-gray-900 font-light hover:text-black text-sm tracking-wide uppercase">contacto</a> <li class="px-2 border-gray-900 py-3"><a href=/acerca class="text-gray-900 font-light hover:text-black text-sm tracking-wide uppercase">acerca</a> </li> </ul></div></div></nav></div> <div class="px-4 bg-gray-100"><div class="container mx-auto"><div class="gap-2 grid grid-cols-4"><div class="col-span-4 sm:col-span-3"><div class=box-border><main class=py-8> <ul><li><a href=blog/2021/04/04/como-trabajar-con-react-context-y-hooks rel=prefetch>Cómo trabajar con React Context y Hooks</a> <p class=blog-timestamp>Posteado en 4/4/2021, 5:07:02 PM por Mario Menjívar</p> <li><a href=blog/2020/09/04/como-validar-formularios-en-react-sin-lagrimas rel=prefetch>Cómo validar formularios en React, sin lágrimas</a> <p class=blog-timestamp>Posteado en 9/4/2020, 2:08:02 PM por Mario Menjívar</p> <li><a href=blog/2020/08/14/algoritmos-busqueda-binaria rel=prefetch>#Algoritmos: Búsqueda binaria</a> <p class=blog-timestamp>Posteado en 8/14/2020, 4:47:12 PM por Mario Menjívar</p> <li><a href=blog/2020/08/09/como-crear-un-blog-a-base-de-markdown-y-javascript rel=prefetch>Cómo crear un blog a base de markdown y JavaScript</a> <p class=blog-timestamp>Posteado en 8/9/2020, 5:23:17 PM por Mario Menjívar</p> </ul></main></div></div> <div class="col-span-4 sm:col-span-1"><div class=box-border><main class=py-8><p class="text-xs text-gray-400 tracking-wide uppercase">No entries</main></div></div></div></div></div> <footer class="box-border border-t px-4"><div class="container mx-auto py-8 text-sm">2021 © Mario Menjívar</div></footer></div></div></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,(function(a,b){return {posts:[{author:a,slug:"como-trabajar-con-react-context-y-hooks",title:"Cómo trabajar con React Context y Hooks",timestamp:new Date(1617556022000),brief:"Esta mañana, por curiosidad, leía la fechas de lanzamientos de algunas de las herramientas que hoy damos por hecho. React, por ejemplo, fue lanzado el 29 de mayo del año 2013. En estos casi 10 años, hemos visto la evolución de este ecosistema, desde _Class Components_ a _Hooks_. Hoy, te mostraré cómo hacer uso de una de las últimas características añadidas a este popular Framework: el contexto.",keywords:"react,español,context,cómo usar react context,user,blog,hooks,reemplazar redux,dejar de usar redux,redux,reducer,state",cover:b,endpoint:"2021\u002F04\u002F04\u002Fcomo-trabajar-con-react-context-y-hooks",content:"\n## TODO\n\n- [ ] Find a `cover` image\n\n# Cómo trabajar con React Context y Hooks\n\nEsta mañana, por curiosidad, leía la fechas de lanzamientos de algunas de las herramientas que hoy damos por hecho. React, por ejemplo, fue lanzado el 29 de mayo del año 2013. En estos casi 10 años, hemos visto la evolución de este ecosistema, desde _Class Components_ a _Hooks_. Hoy, te mostraré cómo hacer uso de una de las últimas características añadidas a este popular Framework: el contexto.\n\n## Hold on\n\nPara ser prácticos, estoy asumiendo que:\n\n- Ya conoces cómo funcionan los _Hooks_.\n- Ya haz trabajado con librerías de Estado global (por ejemplo, _Redux_).\n\nSi este no es tu caso, igual quédate. Nos vamos a divertir.\n\n## Ok, React Context\n\n_In a nutshell_, _React Context_ nos permite compartir el _State_ de nuestra aplicación a través del árbol de componentes sin tener que _pasar_ las propiedades explicítamente por cada uno de ellos. Pero... ¿Por qué querríamos acceder a las propiedades sin tener que pasarlas explícitamente?\n\nVeamos el siguiente ejemplo, un carrito de compras:\n\n```jsx\n\u002F\u002F App.js\n\nimport React from \"react\";\nimport { Container, Row, Col, Form } from \"reactstrap\";\n\nexport default function App() {\n  const [cart] = React.useState([{ name: `iPad` }, { name: `OnePlus 9` }]);\n  const [user] = React.useState({ name: `Mario` });\n  \u002F*\n   * En nuestra App, aquí tenemos el origen de datos\n   *\u002F\n  return \u003CLayout cart={cart} user={user} \u002F\u003E;\n}\n\nfunction Layout({ cart, user }) {\n  \u002F*\n   * Construímos el esqueleto de la interfaz\n   *\u002F\n  return (\n    \u003CContainer\u003E\n      \u003CRow\u003E\n        \u003CCol\u003E\n          \u003CCartForm cart={cart} user={user} \u002F\u003E\n        \u003C\u002FCol\u003E\n      \u003C\u002FRow\u003E\n    \u003C\u002FContainer\u003E\n  );\n}\n\nfunction CartForm({ cart, user }) {\n  \u002F*\n   * Aquí consumimos a user, pero no a cart\n   *\u002F\n  return (\n    \u003CForm\u003E\n      \u003Ch1\u003ECarrito de {user.name}\u003C\u002Fh1\u003E\n      \u003CCartList cart={cart} \u002F\u003E\n      \u003Cbutton type=\"submit\"\u003EBuy\u003C\u002Fbutton\u003E\n    \u003C\u002FForm\u003E\n  );\n}\n\nfunction CartList({ cart }) {\n  \u002F*\n   * Finalmente consumimos a cart\n   *\u002F\n  return (\n    \u003Cdiv className={`p-2`}\u003E\n      {cart.map((item, index) =\u003E (\n        \u003Cdiv key={index}\u003E\n          \u003Cspan style={{ color: `red`, cursor: `pointer` }}\u003E[x]\u003C\u002Fspan\u003E\n          \u003Cspan className={`mx-1`} \u002F\u003E\n          \u003Cspan\u003E{item.name}\u003C\u002Fspan\u003E\n        \u003C\u002Fdiv\u003E\n      ))}\n    \u003C\u002Fdiv\u003E\n  );\n}\n```\n\nSeguro notaste como los _States_ **_user_** y **_cart_** tienen que _pasar_ por todos los componentes del árbol para llegar a los componentes dónde realmente serán de utilidad. Creéme cuando te digo que esto puede complicarse aún más.\n\n¿No sería más sencillo poder acceder a ellos justo dónde los necesitemos?\n\n## Provider, Consumer, useReducer y useContext\n\nYa que tengo tu atención, vamos a introducir unos cuantos conceptos:\n\n- **_Provider_**: Como su nombre lo sugiere (proveedor en español), es el componente que proveerá los datos a _todos_ sus componentes hijos. Es aquí dónde el _State_ vivirá.\n\n- **_Consumer_**: Con él, cada nodo (o componente) que puede acceder al _State_ que vive en el _Provider_.\n\nEstos dos conceptos son fundamentales para entender lo qué sucede al implementar React Context en tu aplicación. Sin embargo, el título de este artículo tiene un \"y Hooks\" al final. Así que debemos presentar los siguientes Hooks:\n\n- **_useReducer_**: Si has utilizado _Redux_, ya conoces el próposito de un _reducer_. Es una función que recibe dos parametros, el _state_ actual y una _action_. Con estos dos párametros, podemos organizar la forma en cómo el _State_ será actualizado _reduciendo_ las actualizaciones a casos. Los utilizaremos aquí junto con _useContext_.\n\n- **_useContext_**: _In a nutshell_, este Hook actúa como un _Consumer_.\n\n## Ah sí, el Context\n\nLo siguiente en nuestra lista es:\n\n- Configurar un Contexto\n- Establece una forma de actualizar\n- Consumirlo\n\nPara eso, necesitamos el siguiente script. Encontrarás comentarios explícativos.\n\n```jsx\n\u002F\u002F context.js\n\nimport React from \"react\";\n\nconst StateContext = React.createContext();\nconst DispatchContext = React.createContext();\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case `REMOVE_ITEM`:\n      const index = Number(action.data.index);\n      return {\n        ...state,\n        cart: [...state.cart.slice(0, index), ...state.cart.slice(index + 1)],\n      };\n\n    default:\n      return state;\n  }\n}\n\nfunction Provider({ children }) {\n  \u002F*\n   * Creamos un State usando el hook useReducer\n   * De esta manera, obtenemos la habilidad de separar nuestra lógica\n   * En acciones.\n   *\n   * Ver: https:\u002F\u002Fes.reactjs.org\u002Fdocs\u002Fhooks-reference.html#usereducer\n   *\u002F\n  const [state, dispatch] = React.useReducer(reducer, {\n    user: { name: `Mario` },\n    cart: [\n      { name: `iPad Air` },\n      { name: `OnePlus 9` },\n      { name: `Thinpad X1 Carbo 9 Gen` },\n    ],\n  });\n\n  \u002F*\n   * Establecemos 2 Providers\n   * 1 para proveer el State\n   * 1 para proveer la función Dispatch\n   *\n   * Esto es así, ya que la función Dispatch nunca cambiará\n   * Por esta razón, la separamos del resto del State\n   *\u002F\n  return (\n    \u003CStateContext.Provider value={state}\u003E\n      \u003CDispatchContext.Provider value={dispatch}\u003E\n        {children}\n      \u003C\u002FDispatchContext.Provider\u003E\n    \u003C\u002FStateContext.Provider\u003E\n  );\n}\n\nfunction useConsumer() {\n  \u002F*\n   * Finalmente, hacemos uso del Hook useContext\n   * para consumir el State que reside en cada Provider\n   *\n   * La razón por la que es un Array es para darle el formato\n   * de un custom Hook.\n   *\u002F\n  return [\n    React.useContext(StateContext),\n    React.useContext(DispatchContext),\n  ].map((ctx) =\u003E {\n    if (ctx === undefined) throw new Error(`Provider not found`);\n    return ctx;\n  });\n}\n\n\u002F*\n * Exportamos\n *\u002F\nexport { Provider, useConsumer };\n```\n\nEn el script anterior, nos encontramos con 3 funciones importantes.\n\n- **_Provider_**: Más que una función, un tipo. Para ser más específicos, un componente de React. Este componente proveerá el _State_ global.\n\n- **_useConsumer_**: Más que una función, un custom Hook. Con él, consumiremos el _State_ en los hijos del componente `\u003CProvider \u002F\u003E`.\n\n- **_reducer_**: Nuestra función **_reducer_**. Con ella, organizaremos cómo actualizaremos nuestro _State_.\n\nPor último, exportamos únicamente lo que usaremos en los componentes dónde necesitemos el _State_. En nuestro script `App.js`.\n\n```jsx\n\u002F\u002F App.js\n\n\u002F\u002F ...\n- function CartForm({ cart, user }) {       \u002F\u002F Removed\n+ function CartForm()) {                    \u002F\u002F Added\n\n+  const [state, dispatch] = useConsumer();\n\n+  function removeItem(index) {\n+    dispatch({ type: `REMOVE_ITEM`, data: { index } });\n+  }\n\n  \u002F*\n   * Aquí consumimos a user, pero no a cart\n   *\u002F\n  return (\n    \u003CForm\u003E\n-     \u003Ch1\u003ECarrito de {user.name}\u003C\u002Fh1\u003E\n+     \u003Ch1\u003ECarrito de {state.user.name}\u003C\u002Fh1\u003E\n\n-     \u003CCartList cart={state.cart} removeItem={removeItem} \u002F\u003E\n+     \u003CCartList cart={state.cart} removeItem={removeItem} \u002F\u003E\n\n-     \u003CButton type=\"submit\"\u003EBuy\u003C\u002FButton\u003E\n+     \u003CButton type=\"submit\" onClick={() =\u003E alert(`Thank you!`)}\u003EBuy\u003C\u002FButton\u003E\n    \u003C\u002FForm\u003E\n  );\n}\n\u002F\u002F ...\n```\n\nEn este ejemplo, `\u003CCartForm\u003E` es el componente desde el cuál accedimos al contexto utilizando nuestro _Consumer_ `useConsumer`. En él, programamos lógica para poder ejecutar acciones como remover un _item_ de la lita del carrito.\n\n```jsx\n\u002F\u002F App.js\n\n\u002F\u002F ...\n- function CartList({ cart }) {             \u002F\u002F Removed\n+ function CartList({ cart, removeItem }) { \u002F\u002F Added\n  \u002F*\n   * Finalmente consumimos a cart\n   *\u002F\n  return (\n    \u003Cdiv className={`p-2`}\u003E\n      {cart.map((item, index) =\u003E (\n        \u003Cdiv key={index}\u003E\n-         \u003Cspan style={{ color: `red`, cursor: `pointer` }}\u003E[x]\u003C\u002Fspan\u003E\n+         \u003Cspan style={{ color: `red`, cursor: `pointer` }} onClick={() =\u003E removeItem(index)}\u003E[x]\u003C\u002Fspan\u003E\n          \u003Cspan className={`mx-1`} \u002F\u003E\n          \u003Cspan\u003E{item.name}\u003C\u002Fspan\u003E\n        \u003C\u002Fdiv\u003E\n      ))}\n    \u003C\u002Fdiv\u003E\n  );\n}\n\u002F\u002F ...\n```\n\nTe preguntarás, ¿Por qué consumir el _State_ únicamente en el componente `\u003CCartForm \u002F\u003E` y no también en `\u003CCartList\u003E`? La respuesta es simple. El _React Context_ es una herramienta muy poderosa, pero no significa que debamos usarla para todo.\n\nEn nuestro ejemplo, es más importante mantener el componente `\u003CCartList\u003E` reusable, de esta forma, si tenemos que renderizar la lista en otro lado, no dependeremos del contexto que creamos aquí.\n\nPuedes ver la Aplicación resultando abajo:\n\n\u003Ciframe src=\"https:\u002F\u002Fcodesandbox.io\u002Fembed\u002Fboring-pasteur-gx6vs?fontsize=14&hidenavigation=1&moduleview=1&theme=dark\"\n  style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\"\n  title=\"boring-pasteur-gx6vs\"\n  allow=\"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\"\n  sandbox=\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\"\n\u003E\u003C\u002Fiframe\u003E\n\n\u003Cbr \u002F\u003E\n\n## Conclusión\n\nEspero te haya sido de utilidad este Post. Seguramente verás como más y más proyectos utilizan las APIs nativas de React para manejar varibles globales, en lugar de instalar librerías de terceros.\n\nÚnicamente ten en cuenta que estás son meramente herramientas, y no hay una sola que sea perfecta para cada caso de uso. En el ejemplo, tomamos la decisión de dejar el componente presentacional `\u003CCartList\u003E` independiente para poder usarlo en otros contextos sin problemas.\n\n## Referencias\n\n- [Context](https:\u002F\u002Freactjs.org\u002Fdocs\u002Fcontext.html)\n- [useReducer](https:\u002F\u002Freactjs.org\u002Fdocs\u002Fhooks-reference.html#usereducer)\n- [React Context Explained (2020)](https:\u002F\u002Fwww.youtube.com\u002Fwatch?v=rFnfvhtrNbQ)\n- [How to use React Context effectively](https:\u002F\u002Fkentcdodds.com\u002Fblog\u002Fhow-to-use-react-context-effectively)"},{author:a,slug:"como-validar-formularios-en-react-sin-lagrimas",title:"Cómo validar formularios en React, sin lágrimas",timestamp:new Date(1599228482000),brief:"Históricamente, validar un formulario en React requiere de una cantidad impresionante de boilerplate que añade complejidad innecesaria. Veamos cómo librarnos de eso.",keywords:"formik,español,react,cómo,validar formularios react,binaria,blog",cover:b,endpoint:"2020\u002F09\u002F04\u002Fcomo-validar-formularios-en-react-sin-lagrimas",content:"\n# Cómo validar formularios en React, sin lágrimas\n\nTodos los desarrolladores de software que trabajamos con React, absolutamente todos, hemos tenido ese tedioso ticket para crear y\u002Fo validar un formulario. Afortunadamente para ti, hoy te mostraré la forma más sencilla de cerrarlo: Formik.\n\n## Formik what?\n\n[Formik](https:\u002F\u002Fformik.org\u002Fdocs\u002Foverview) es uno de los paquetes de software de código abierto más útiles que podemos encontrar en el repositorio de `npm` (o `yarn`, como gustes). En palabras de uno de sus creadores, [@JaredPalmer](https:\u002F\u002Ftwitter.com\u002Fjaredpalmer):\n\n\u003E \"Admítamoslo, los formularios requiren de muchísimo código en React. Para poner las cosas peor, la mayoría de utilidades para construirlos hacen muchísima, demasiada magia que frecuentemente trae un costo al desempeño\" de [Formik Docs](https:\u002F\u002Fformik.org\u002Fdocs\u002Foverview)\n\nPara Jared y compañía había un beneficio en estandarizar los componentes de entrada y cómo los datos fluían a través del Form. Es la razón de ser de Formik.\n\n## Preparando el ejemplo\n\nPara ser prácticos, vamos a hacer uso del famosísimo toolchain `create-react-app`. Ve a tu línea de comandos y ejecuta:\n\n```shell\n$ npx create-react-app formik-sample\n$ cd formik-sample\n$ npm start\n```\n\n![React App by create-react-app](https:\u002F\u002Fimgur.com\u002F8tQZ4qO.png)\n\nAhora tenemos la base para trabajar nuestra aplicación React, pero necesitamos un form al cuál validar, para eso instalaremos el siguiente paquete:\n\n```shell\n$ npm install bootstrap reactstrap --save\n```\n\nEste paquete componetiza la mayoría de utilidades del popular framework CSS Bootstrap, lo cuál acelera nuestra habilidad de construir el layout del formulario. Una vez completa la instalación, copia y pega este código en tu archivo `src\u002FApp.js`:\n\n```javascript\n\u002F\u002F src\u002FApp.js\n\nimport React from \"react\";\nimport {\n  Container,\n  Button,\n  Form,\n  FormGroup,\n  Label,\n  Input,\n  Card,\n  CardBody,\n  CardHeader,\n  FormFeedback,\n} from \"reactstrap\";\n\nfunction Formulario() {\n  return (\n    \u003CContainer className=\"p-5\"\u003E\n      \u003CCard\u003E\n        \u003CCardHeader\u003E\u003C\u002FCardHeader\u003E\n        \u003CCardBody\u003E\n          \u003CForm\u003E\n            \u003Ch1\u003EForm\u003C\u002Fh1\u003E\n            \u003CFormGroup\u003E\n              \u003CLabel for=\"name\"\u003EName\u003C\u002FLabel\u003E\n              \u003CInput type=\"text\" name=\"name\" placeholder=\"Woody Allen\" \u002F\u003E\n            \u003C\u002FFormGroup\u003E\n            \u003CFormGroup\u003E\n              \u003CLabel for=\"email\"\u003EEmail\u003C\u002FLabel\u003E\n              \u003CInput\n                type=\"email\"\n                name=\"email\"\n                placeholder=\"contoso@domain.com\"\n              \u002F\u003E\n            \u003C\u002FFormGroup\u003E\n            \u003CFormGroup\u003E\n              \u003CLabel for=\"password\"\u003EPassword\u003C\u002FLabel\u003E\n              \u003CInput\n                type=\"password\"\n                name=\"password\"\n                placeholder=\"Provide a password\"\n              \u002F\u003E\n            \u003C\u002FFormGroup\u003E\n            \u003CFormGroup\u003E\n              \u003CLabel for=\"bio\"\u003EText Area\u003C\u002FLabel\u003E\n              \u003CInput type=\"textarea\" name=\"bio\" \u002F\u003E\n            \u003C\u002FFormGroup\u003E\n\n            \u003CButton type=\"submit\"\u003ESubmit\u003C\u002FButton\u003E\n          \u003C\u002FForm\u003E\n        \u003C\u002FCardBody\u003E\n      \u003C\u002FCard\u003E\n    \u003C\u002FContainer\u003E\n  );\n}\n\nexport default Formulario;\n```\n\nTambién, añade está línea en el archivo `src\u002Findex.js`:\n\n```javascript\n\u002F\u002F src\u002Findex.js\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap\u002Fdist\u002Fcss\u002Fbootstrap.css'; \u002F\u002F Importa bootstrap a la React App\n\u002F\u002F ...\n```\n\nDeberías ver un formulario similar al de la imagen:\n\n![Form built with reactstrap](https:\u002F\u002Fimgur.com\u002F6NWfclG.png)\n\nContinuemos.\n\n## Formik\n\nLlegados a este punto, ya estamos listos para ver la magia de Formik.\n\n```shell\n$ npm install formik --save\n```\n\nYa que la instalación haya finalizado, vamos a hacer unas modificaciones a nuestro código en `src\u002FApp.js`.\n\n```javascript\n\u002F\u002F src\u002FApp.js\n\nimport React from \"react\";\nimport { Formik } from \"formik\"; \u002F\u002F Importamos el component \u003CFormik \u002F\u003E\nimport {\n  Container,\n\u002F\u002F ...\n```\n\nEste componente debe encapsular a nuestro formulario, cómo se muestra abajo. Formik se mantiene al tanto del estado del formulario y te provee valores, métodos reusables y manejadores de eventos a través de `props`.\n\nAdemás, Formik sigue una regla básica para simplificar el proceso de validación. Para que la librería puede relacionar un `initialValues` a un `\u003CInput\u003E` específico, tanto la propiedad como el `name` de `\u003CInput\u003E` deben tener el mismo nombre. En el ejemplo de abajo, hemos definido 5 controles: `name`, `email`, `password`, `bio`, and `multiple`.\n\nAunque no debemos olvidar que estamos en React, por lo qué debemos manejar el cambio de los valores de los controles. Esto lo logramos con los manejadores provistos por Formik: `handleChange` y `handleBlur`. Sin olvidar que debemos renderizar el valor adecuado en el control, para eso haremos uso de la propiedad `values`.\n\nAparte de las útiles `props` provistas por Formik, también el tag en sí mismo necesita de ciertas propiedades para funcionar:\n\n- `initialValues`: Le dice a Formik de cuales valores debe mantenerse al tanto y buscar sus respectivos controles en el formulario.\n- `validate`: Esta función recibe como parametro los `values` de los cuáles la librería está al tanto para ser validados.\n- `onSubmit`: Quizá la función que más te interese de la librería. Es aquí dónde definimos que debe suceder si nuestro formulario ha sido validado con éxito. Por ejemplo, postear los valores a un servicio del backend.\n\nYa qué hemos cubierto una breve explicación, es hora de ver todo esto en código.\n\n```javascript\n\u002F\u002F src\u002FApp.js\n\n\u002F\u002F ...\nfunction Formulario() {\n  return (\n    \u003CContainer className=\"p-5\"\u003E\n      \u003CCard\u003E\n        \u003CCardHeader\u003E\u003C\u002FCardHeader\u003E\n        \u003CCardBody\u003E\n          \u003CFormik\n            initialValues={{\n              name: \"\",\n              email: \"\",\n              password: \"\",\n              bio: \"\",\n            }}\n            validate={(values) =\u003E {\n              const errors = {};\n\n              \u002F\u002F We need a name\n              if (!values.name) errors.name = \"Required\";\n\n              \u002F\u002F We need a valid e-mail\n              if (!values.email) errors.email = \"Required\";\n              else if (!\u002F^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$\u002Fi.test(values.email))\n                errors.email = \"Invalid email address\";\n\n              \u002F\u002F We need a valid password\n              if (!values.password) errors.password = \"Required\";\n              else if (`${values.password}`.length \u003C 7)\n                errors.password =\n                  \"Password must be larger than 7 characters\";\n\n              console.log({ values, errors });\n\n              return errors;\n            }}\n            onSubmit={(values, { setSubmitting }) =\u003E {\n              setTimeout(() =\u003E {\n                alert(JSON.stringify(values, null, 2));\n\n                setSubmitting(false);\n              }, 250);\n            }}\n          \u003E\n            {(props) =\u003E {\n              const {\n                values,\n                errors,\n                touched,\n                handleChange,\n                handleBlur,\n                handleSubmit,\n                isSubmitting,\n                \u002F* y otras más *\u002F\n              } = props;\n              return (\n                \u003CForm onSubmit={handleSubmit}\u003E\n                  \u003Ch1\u003EForm\u003C\u002Fh1\u003E\n                  \u003CFormGroup\u003E\n                    \u003CLabel for=\"name\"\u003EName\u003C\u002FLabel\u003E\n                    \u003CInput\n                      type=\"text\"\n                      name=\"name\"\n                      placeholder=\"Woody Allen\"\n                      invalid={errors.name && touched.name}\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                      value={values.name}\n                    \u002F\u003E\n                    \u003CFormFeedback\u003E{errors.name}\u003C\u002FFormFeedback\u003E\n                  \u003C\u002FFormGroup\u003E\n                  \u003CFormGroup\u003E\n                    \u003CLabel for=\"email\"\u003EEmail\u003C\u002FLabel\u003E\n                    \u003CInput\n                      type=\"email\"\n                      name=\"email\"\n                      placeholder=\"contoso@domain.com\"\n                      invalid={errors.email && touched.email}\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                      value={values.email}\n                    \u002F\u003E\n                    \u003CFormFeedback\u003E{errors.email}\u003C\u002FFormFeedback\u003E\n                  \u003C\u002FFormGroup\u003E\n                  \u003CFormGroup\u003E\n                    \u003CLabel for=\"password\"\u003EPassword\u003C\u002FLabel\u003E\n                    \u003CInput\n                      type=\"password\"\n                      name=\"password\"\n                      placeholder=\"Provide a password\"\n                      invalid={errors.password && touched.password}\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                      value={values.password}\n                    \u002F\u003E\n                    \u003CFormFeedback\u003E{errors.password}\u003C\u002FFormFeedback\u003E\n                  \u003C\u002FFormGroup\u003E\n                  \u003CFormGroup\u003E\n                    \u003CLabel for=\"bio\"\u003EText Area\u003C\u002FLabel\u003E\n                    \u003CInput\n                      type=\"textarea\"\n                      name=\"bio\"\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                      value={values.name}\n                    \u002F\u003E\n                  \u003C\u002FFormGroup\u003E\n\n                  \u003CButton type=\"submit\" disabled={isSubmitting}\u003E\n                    {isSubmitting ? `Loading` : `Submit`}\n                  \u003C\u002FButton\u003E\n                \u003C\u002FForm\u003E\n              );\n            }}\n          \u003C\u002FFormik\u003E\n        \u003C\u002FCardBody\u003E\n      \u003C\u002FCard\u003E\n    \u003C\u002FContainer\u003E\n  );\n}\n\u002F\u002F ...\n```\n\nEl código de arriba nos permite validar el nombre, e-mail y contraseña en nuestro formulario. Al hacer clic en `Submit`, sin completar un solo `\u003CInput\u003E`, deberías ver algo similar a esto:\n\n![Formulario validado](https:\u002F\u002Fimgur.com\u002FIIVx4c9.png)\n\nListo, ya hemos validado el formulario. Lo único que nos queda es definir el manejador `onSubmit` en el tag `Formik` y tendremos la certeza de qué si nuestro programa ejecuta ese `callback` se debe a que nuestros datos han sido previamente validados.\n\n## Podemos hacerlo mejor\n\nSeguramente tienes alguna de estas preguntas en tu cabeza: ¿Por qué repetir la asignación de `handleChange` y `handleBlur`? y ¿Por qué validar _manualmente_ cada propiedad paso a paso?. Creéme, yo también me hice esas preguntas.\n\nPara fortuna de quién tenga que mantener este formulario, hay una forma más sencilla de definir las validación y los controles de estado.\n\n### Formik Field\n\nPara reducir el número de veces que repetimos la asignación de los manejadores de eventos, vamos a importar otro elemento de la librería Formik.\n\n```javascript\n\u002F\u002F src\u002FApp.js\n\n\u002F\u002F ...\nimport { Formik, Field } from \"formik\"; \u002F\u002F Importamos el component \u003CField \u002F\u003E\n\u002F\u002F ...\n```\n\nEste componente nos permite ahorrarnos la asignación de manejadores y valor directamente al componente. Lo único que debemos hacer, y ya que estamos usando `reacstrap`, es asignarlo a la propiedad `tag` de cada elemento `\u003CInput\u003E`. Formik se encargará del resto.\n\n```javascript\n\u003CInput\n  type=\"text\"\n  name=\"name\"\n  placeholder=\"Woody Allen\"\n  invalid={errors.name && touched.name}\n- onChange={handleChange}\n- onBlur={handleBlur}\n- value={values.name}\n+ tag={Field}\n\u002F\u003E\n```\n\nEs imprescindible que la propiedad `name` del `\u003CInput\u003E` tenga el mismo nombre a una propiedad en `initialValues`.\n\n### Formik + Yup\n\n[`Yup`](https:\u002F\u002Fgithub.com\u002Fjquense\u002Fyup) es una librería que nos permite construir esquemas de conversión y validación. El punto más fuerte de `Yup` es el nível de expresividad que las validaciones pueden alcanzar, sencillas o complejas.\n\nDe acuerdo a la [documentación](https:\u002F\u002Fformik.org\u002Fdocs\u002Fguides\u002Fvalidation#validationschema) de `Formik`, `Yup` es un ciudadano de primera clase en la librería por lo que posee una `prop` especial en el elemento `\u003CFormik\u003E` llamada `validationSchema`.\n\n```shell\n$ npm install yup --save\n```\n\nUna vez instalamos `Yup`, debemos importarlo:\n\n```javascript\n\u002F\u002F src\u002FApp.js\n\n\u002F\u002F ...\nimport * as Yup from \"yup\"; \u002F\u002F Importando Yup\nimport {\n  Container,\n\u002F\u002F ...\n```\n\nRegresemos al código del componente `Formulario`. Justo en la propiedades del elmento `\u003CFormik\u003E` vamos a eliminar la propiedad `validate` y en su lugar asignaremos la propiedad `validationSchema`.\n\n```javascript\n\u003CFormik\n  initialValues={{\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    bio: \"\",\n  }}\n  validationSchema={Yup.object().shape({\n    name: Yup.string().required(\"Required\"),\n    email: Yup.string().email(\"Invalid email\").required(\"Required\"),\n    password: Yup.string().min(8, \"Password is too short\").required(\"Required\"),\n  })}\n  onSubmit={(values, { setSubmitting }) =\u003E {\n    setTimeout(() =\u003E {\n      alert(JSON.stringify(values, null, 2));\n\n      setSubmitting(false);\n    }, 250);\n  }}\n\u003E\n```\n\nPor último, podemos llenar nuestro formulario y ver que una vez validado, el `callback` en la propiedad `onSubmit` del elemento `\u003CFormik\u003E` es ejecutada.\n\n![Formulario completo](https:\u002F\u002Fimgur.com\u002Fwm6iA0l.png)\n\n## Conclusión\n\nEspero este post te sea de mucha ayuda. En mi experiencia con React, Formik me ha facilitado el validar formularios al proveerme de métodos que me permiten ajustar a cada momento los valores y las validaciones necesarias. La expresividad del código es de gran valor ya que permite escalar y\u002Fo mantener de una forma sencilla sin reinventar la rueda para cada formulario.\n\n## Referencias\n\n- [Formik documentation](https:\u002F\u002Fformik.org\u002Fdocs\u002Foverview)"},{author:a,slug:"algoritmos-busqueda-binaria",title:"#Algoritmos: Búsqueda binaria",timestamp:new Date(1597423632000),brief:"A qué alguna vez te toco buscar un número de teléfono en aquellos gigantescos directorios teléfonicos, ¿Cómo le hacías, página por página o te tratabas de ahorrar tiempo saltándote páginas?",keywords:"algoritmos,computer,science,busqueda,binaria,blog,ciencias,computacion",cover:"https:\u002F\u002Fupload.wikimedia.org\u002Fwikipedia\u002Fcommons\u002Ff\u002Ff7\u002FBinary_search_into_array.png",endpoint:"2020\u002F08\u002F14\u002Falgoritmos-busqueda-binaria",content:"\n# \\#Algoritmos: Búsqueda binaria\n\nA qué alguna vez te toco buscar un número de teléfono en aquellos gigantescos directorios teléfonicos, ¿Cómo le hacías, página por página o tratabas de ahorrar tiempo saltándote páginas?\n\n## La idea\n\nRetomando el gigantesco directorio teléfonico, podemos estar seguros de una cosa: los números de teléfono se presentan en orden alfabético por el nombre del propietario. Esto es es imprecindible para el algoritmo de búsqueda binaria. \n\nSuponiendo que buscamos el número teléfonico de Juan, ¿Tiene sentido empezar desde las primeras páginas dónde estarán los números de personas cómo Alberto o Alejandra? Si tu respuesta es no, estás en lo correcto, será muchísimo más fácil identificar en cuál página empiezan a listarse los nombres que inician con J, y empezar nuestra búsqueda desde ahí. Una vez en esta página, podríamos incluso tratar de idéntificar en cuál página empiezan a listarse los nombres que empiezan con Ju, y así sucesivamente hasta encontrar a Juan.\n\n## En código\n\nPero en este blog nosotros ya no usamos esos gigantescos directorios teléfonicos, así que vamos a ver un ejemplo más acorde a lo que sabemos hacer aquí: código. Por lo qué para nuestro ejemplo práctico, vamos a validar si un número `X` está incluído dentro de una lista de `N` elementos.\n\nComo mencionamos antes en el ejemplo del directorio, podíamos estar seguros de una cosa: sus datos están ordenados. Esto se mantiene a la hora de utilizar código. Nuestro arreglo de datos debe estar ordenado. Sino lo está, debemos ordenarlo. Eso lo dejaremos para futuros posts.\n\nEsta será nuestra lista de trabajo:\n\n```javascript\nconst numbers = [2, 3, 5, 9, 15, 17, 55, 69];\n```\n\nPara ejecutar de manera efectiva el algoritmo, necesitaremos tener la noción del mayor y menor número en nuestra lista, y ya qué no hay mejor manera de localizar valores en una lista que usar su indice, guardaremos eso, los indices:\n\n```javascript\nlet maxIndex = numbers.length - 1;\nlet minIndex = 0;\n```\n\n¿Recuerdas como en el ejemplo del directorio, tratabamos de identificar la página en la cuál los nombres que inician con J empezaban a listarse? Al aplicar el algoritmo de búsqueda binaria tomamos un enfoque más general. Esto significa que nosotros siempre dividiremos la lista por la mitad y, partiendo de una comparación, definiremos a cuál de las dos mitades pertence el valor que deseamos encontrar. Una vez conozcamos la mitad a la qué pertenece, repetimos el proceso y así sucesivamente hasta que nuestra área de búsqueda se reduce a uno, o simplemente no encontramos el valor.\n\n\u003E ![Búsqueda binaria](https:\u002F\u002Fupload.wikimedia.org\u002Fwikipedia\u002Fcommons\u002Ff\u002Ff7\u002FBinary_search_into_array.png)\n\u003E Este es el esquema del funcionamiento del algoritmo de [Wikipedia](https:\u002F\u002Fes.wikipedia.org\u002Fwiki\u002FB%C3%BAsqueda_binaria)\n\nAntes de ejemplificar lo anterior, nos queda mostrar cómo identificaremos la mitad de nuestra lista:\n\n```javascript\nlet half = Math.floor((minIndex + maxIndex)\u002F2);\n```\n\nAhora sí, armemos el algoritmo:\n\n```javascript\nconst find = 17;\nconst numbers = [2, 3, 5, 9, 15, 17, 55, 69];\n\nfunction busquedaBinaria(collection, findee) {\n  \u002F\u002F Asignando los valores del rango inicial\n  let minIndex = 0;\n  let maxIndex = numbers.length - 1;\n\n  while (minIndex \u003C= maxIndex) {\n    \n    \u002F\u002F Calculando la posición en el medio de la lista\n    let half = Math.floor((minIndex + maxIndex) \u002F 2);\n\n    \u002F\u002F Recoger el valor del medio\n    let guess = collection[half];\n\n    if (guess === findee) \u002F\u002F Comparamos si es el valor que buscamos\n      return half;\n\n    else if (guess \u003E findee) \n      \u002F\u002F Si el valor que buscamos es menor al valor supuesto\n      \u002F\u002F debemos reducir nuestro rango de búsqueda.\n      \u002F\u002F Ahora nuestro mayor valor está justo debajo de la mitad calculada.\n      maxIndex = half - 1; \n    \n    else \n      \u002F\u002F Si el valor que buscamos es mayor al valor supuesto\n      \u002F\u002F debemos reducir nuestro rango de búsqueda.\n      \u002F\u002F Ahora nuestro menor valor está justo arriba de la mitad calculada.\n      minIndex = half + 1;\n  }\n  return -1;\n}\n\nconst foundIndex = busquedaBinaria(numbers, find);\nconsole.log(\n  foundIndex === -1\n    ? `El número ${find} no fue encontrado.`\n    : `El número ${find} está en el índice ${foundIndex}.`\n);\n```\n\nEs esta dinámica de decidir únicamente entre dos opciones, cada vez que reducimos el área de búsqueda, lo qué le da el nombre algoritmo.\n\n# Conclusión\n\nPudimos simplemente ejecutar el siguiente código:\n\n```javascript\nconst find = 17;\nconst numbers = [2, 3, 5, 9, 15, 17, 55, 69];\n\nlet foundIndex = -1;\n\nfor (let index = 0; index \u003C numbers.length; index++) {\n  if (find === numbers[index]) {\n    foundIndex = index;\n    break;\n  }\n}\n\nconsole.log(\n  foundIndex === -1\n    ? `El número ${find} no fue encontrado.`\n    : `El número ${find} está en el índice ${foundIndex}.`\n);\n```\n\nComparar cada uno de los `items` en la lista y, cuando lo encontramos, listo. Podrías pensar que es enfoque es muchísimo más fácil y rápido de programar, y tienes razón. Pero, ¿Qué pasa cuando nuestra lista no contiene 8 `items` sino 1,000,000?\n\nLa intención de este post es mostrarte que, si bien es cierto en programación hay muchas formas de resolver un problema, nuestro objetivo conforme avanzamos en nuestra carrera es escogar la más óptima. Cada problema es un mundo y es nuestro trabajo encontrar la mejor solución.\n\n# Referencias\n\n- [Binary search algorithm from Wikipedia](https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FBinary_search_algorithm)\n- [Grokking Algorithms: An Illustrated Guide For Programmers and Other Curious People](https:\u002F\u002Fwww.goodreads.com\u002Fbook\u002Fshow\u002F22847284-grokking-algorithms-an-illustrated-guide-for-programmers-and-other-curio)"},{author:a,slug:"como-crear-un-blog-a-base-de-markdown-y-javascript",title:"Cómo crear un blog a base de markdown y JavaScript",timestamp:new Date(1596993797000),brief:"Seguramente te haz hecho la siguiente pregunta: ¿Cómo hostear un blog que sea fácil de mantener, sin pagar un centavo? En este post te explico una de tantas alternativas.",keywords:"javascript,svelte,blog,markdown,howto",endpoint:"2020\u002F08\u002F09\u002Fcomo-crear-un-blog-a-base-de-markdown-y-javascript",content:"\n# Cómo crear un blog a base de markdown y JavaScript\n\nSeguramente te haz hecho la siguiente pregunta: ¿Cómo hostear un blog que sea fácil de mantener, sin pagar un centavo? En este post te explico una de tantas alternativas.\n\n## Porqué\n\nOtra pregunta que probablemente este en tu cabeza es ¿Por qué markdown y JavaScript? La respuesta es un poco más elaborada. Para empezar, ¿Qué es markdown? Según Wikipedia: \n\n\u003E \"Markdown es un lenguaje de marcado ligero que trata de conseguir la máxima legibilidad y facilidad de publicación tanto en su forma de entrada como de salida, inspirándose en muchas convenciones existentes para marcar mensajes de correo electrónico usando texto plano\" de [Wikipedia](https:\u002F\u002Fes.wikipedia.org\u002Fwiki\u002FMarkdown).\n\nAl usar markdown para escribir un post, estamos estructurando nuestro contenido sin necesidad de incluir HTML o CSS en el momento. Es decir, nos enfocamos enteramente en lo importante: el texto. Esta simplicidad se verá potencializada al incluir _Git_ y _Github_ en la formula, ya que podremos versionar nuestro contenido.\n\nComo mencioné, hay muchas alternativas para lograrlo. Fundamentalmente una página web no es más que HTML, CSS y JavaScript. Herramientas como [_Jekyll_](https:\u002F\u002Fjekyllrb.com\u002F), aprovechan esta regla de oro para ayudarte a generar y administrar posts fácilmente haciendo uso de markdown. Pero, ¿Qué pasa si queremos tomar ventaja de todas las herramientas disponibles en el ecosistema JavaScript que se han establecido en los últimos 10 años?  Para eso tenemos [_Gatsby_](https:\u002F\u002Fwww.gatsbyjs.org\u002F), [_Next.js_](https:\u002F\u002Fnextjs.org\u002F) o [_Sapper_](https:\u002F\u002Fsapper.svelte.dev\u002Fdocs).\n\n_In a nutshell_, estos tres frameworks permiten generar sitios estáticos haciendo uso de herramientas modernas como React o Svelte. En este post nos centraremos en _Sapper_.\n\n## ¿Por qué _Sapper_?\n\nSvelte es el nuevo chico de la cuadra. Su propuesta insignia es mover la reactividad de la UI desde mediadores como el Virtual DOM hacia el lenguaje, o mejor dicho, al compilador, en contraste con React o Vue. Esto aumenta el desempeño de las aplicaciones y disminuye el tamaño del _bundle_.\n\nPuedes echar un vistazo a la [comparativa](https:\u002F\u002Fwww.swyx.io\u002Fwriting\u002Fsvelte-static\u002F) entre Gatsby y Sapper realizada por [Shawn Wang](https:\u002F\u002Ftwitter.com\u002Fswyx), un popular desarrollador en [egghead.io](https:\u002F\u002Fegghead.io\u002F). Se muestra una reducción del 93% en el tamaño del _bundle_ con _Sapper_.\n\n## Setup\n\nPara instalar Sapper, basta con ejecutar los siguientes comandos:\n\n```shell\n[user@host ~]$ npx degit \"sveltejs\u002Fsapper-template#rollup\" my-blog\n[user@host ~]$ cd my-blog\n[user@host my-blog]$ npm install\n[user@host my-blog]$ npm run dev\n```\n\nEn el folder del projecto _my-blog_, nos interesan los siguientes files:\n\n```text\n...\n├ src\n│ ├ routes\n| | ├ blog\n| | | ├ _posts.js\n| | | ├ [slug].json.js\n| | | ├ [slug].svelte\n| | | ├ index.json.js\n| | | ├ index.svelte\n...\n```\n\nDe paso creamos el siguiente directorio y archivo:\n\n```text\n...\n+ ├ content\n+ │ ├ 2020-08-08_hola-mundo.md\n  ├ src\n  │ ├ routes\n...\n```\n\nCon el siguiente contenido:\n\n```text\n---\nauthor: 'Mario Menjívar'\nslug: 'hola-mundo'\ntitle: 'Hola Mundo'\ntimestamp: '2020-08-08T10:23:17.000-07:00'\n---\n\n# Hola mundo\n\nHola mundo.\n```\n\nNecesitamos instalar los siguientes paquetes:\n\n```shell\n[user@host my-blog]$ npm i gray-matter highlight.js marked\n```\n\nEn mi caso, quiero que los posts estén ordenados por su fecha de publicación y que esto se refleje en la URL. Tendremos que hacer unos cambios a los siguientes archivos:\n\n```text\n...\n- | | | ├ [slug].json.js\n- | | | ├ [slug].svelte\n+ | | | ├ [...slug].json.js\n+ | | | ├ [...slug].svelte\n...\n```\n\nLuego, reemplazamos el contenido:\n\n```javascript\n\u002F\u002F src\u002Froutes\u002Fblog\u002F[...slug].json.js\n\nimport fs from \"fs\";\nimport path from \"path\";\nimport marked from \"marked\";\nimport hljs from \"highlight.js\";\nimport grayMatter from \"gray-matter\";\n\n\u002F*\n * Para obtener el contenido del post\n *\u002F\nfunction getPost(year, month, day, fileName) {\n  return fs.readFileSync(\n    path.resolve(\"content\", `${year}-${month}-${day}_${fileName}.md`),\n    \"utf-8\"\n  );\n}\n\n\u002F*\n * En Sapper, este método responde a una request a través del método GET\n * En nuestro caso, la request de un JSON\n *\u002F\nexport function get(req, res, next) {\n  \u002F\u002F Así es cómo resolvemos una `dynamic route` en Sapper,\n  \u002F\u002F obtenemos cada valor en su variable respectiva\n  let [year, month, day, slug] = req.params.slug;\n\n  const postMarkdown = getPost(year, month, day, slug);\n  const renderer = new marked.Renderer();\n\n  \u002F\u002F marked provee una manera de formatear partes específicas del markdown\n  \u002F\u002F en este caso, el código\n  renderer.code = (source, lang) =\u003E {\n    const { value: highlighted } = hljs.highlight(lang, source);\n    return `\u003Cpre class='language-${lang} overflow-x-auto'\u003E\u003Ccode\u003E${highlighted}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E`;\n  };\n\n  marked.use({ renderer });\n\n  const { data, content } = grayMatter(postMarkdown);\n  const html = marked(content);\n\n  if (html) {\n    res.writeHead(200, { \"Content-Type\": \"application\u002Fjson\" });\n    res.end(JSON.stringify({ html, ...data }));\n  } else {\n    res.writeHead(404, { \"Content-Type\": \"application\u002Fjson\" });\n    res.end(JSON.stringify({ message: `Not found` }));\n  }\n}\n```\n```html\n\u003C!-- src\u002Froutes\u002Fblog\u002F[...slug].svelte --\u003E\n\n\u003Cscript context=\"module\"\u003E\n  \u002F*\n   * Este método representa un paso en el ciclo de vida de un component en Sapper.\n   *\n   * Únicamente se ejecuta cuando el componente es montado. Aquí haremos la petición de nuestro JSON con la información del post\n   *\u002F\n  export async function preload({ params }) {\n    let [year, month, day, slug] = params.slug;\n\n    const res = await this.fetch(`blog\u002F${year}\u002F${month}\u002F${day}\u002F${slug}.json`);\n    const data = await res.json();\n\n    if (res.status === 200) {\n      return { post: data };\n    } else {\n      this.error(res.status, data.message);\n    }\n  }\n\u003C\u002Fscript\u003E\n\n\u003Cscript\u003E\n  export let post;\n\u003C\u002Fscript\u003E\n\n\u003Csvelte:head\u003E\n  \u003Ctitle\u003E{post.title} by {post.author}\u003C\u002Ftitle\u003E\n\u003C\u002Fsvelte:head\u003E\n\n\u003Carticle\u003E\n  {@html post.html}\n\u003C\u002Farticle\u003E\n```\n\nDe esta forma se renderizará el post. Ya puedes verlo en tu ambiente local yendo a [\u002Fblog\u002F2020\u002F08\u002F08\u002Fhola-mundo](http:\u002F\u002Flocalhost:3000\u002Fblog\u002F2020\u002F08\u002F08\u002Fhola-mundo).\n\nAún hay un pequeño detalle que debemos cubrir para cumplir con las reglas que _Sapper_ establece si queremos exportar nuestro pequeño blog como un sitio estático.\n\n\u003E \"... cualquier página que quieras que sea incluída en el sitio (estático) exportado debe ser esta ligado con una etiqueta del tipo \\\u003Ca\\\u003E o añadida cómo parametro de la opción  --entry del comando `sapper export`\" de [Sapper docs](https:\u002F\u002Fsapper.svelte.dev\u002Fdocs#How_it_works).\n\nDe acuerdo a la documentación, debemos incluir elementos **\\\u003Ca\\\u003E** que apunten a nuestras páginas generadas a partir de rutas dinámicas, para que al exportar el sitio estas también se incluyan. Por eso programaremos el endpoint [\u002Fblog](http:\u002F\u002Flocalhost:3000\u002Fblog).\n\n```javascript\n\u002F\u002F src\u002Froutes\u002Fblog\u002Findex.json.js\n\nimport fs from \"fs\";\nimport path from \"path\";\nimport grayMatter from \"gray-matter\";\n\nfunction getAllPosts() {\n  const posts = fs\n    .readdirSync(\"content\")\n    .map((fileName) =\u003E {\n      const post = fs.readFileSync(path.resolve(\"content\", fileName), \"utf-8\");\n      return grayMatter(post).data;\n    })\n    .sort((a, b) =\u003E {\n      if (b.timestamp \u003C a.timestamp) return -1;\n      if (b.timestamp \u003E a.timestamp) return 1;\n\n      return 0;\n    });\n  return posts;\n}\n\nexport function get(req, res) {\n  res.writeHead(200, { \"Content-Type\": \"application\u002Fjson\" });\n  res.end(JSON.stringify(getAllPosts()));\n}\n```\n```html\n\u003C!-- src\u002Froutes\u002Fblog\u002Findex.svelte --\u003E\n\n\u003Cscript context=\"module\"\u003E\n  export function preload({ params, query }) {\n    return this.fetch(`blog.json`)\n      .then((r) =\u003E r.json())\n      .then((posts) =\u003E ({\n        posts: posts.map((post) =\u003E {\n          const timestamp = new Date(post.timestamp);\n          return {\n            ...post,\n            timestamp,\n            date: {\n              year: timestamp.getFullYear(),\n              month: `${timestamp.getMonth() + 1}`.padStart(2, `0`),\n              day: `${timestamp.getDate()}`.padStart(2, `0`),\n            },\n          };\n        }),\n      }));\n  }\n\u003C\u002Fscript\u003E\n\n\u003Cscript\u003E\n  export let posts;\n\u003C\u002Fscript\u003E\n\n\u003Csvelte:head\u003E\n  \u003Ctitle\u003EBlog | Mario Menjívar\u003C\u002Ftitle\u003E\n\u003C\u002Fsvelte:head\u003E\n\n\u003Cul\u003E\n  {#each posts as post}\n  \u003Cli\u003E\n    \u003Ca\n      rel=\"prefetch\"\n      href=\"blog\u002F{post.date.year}\u002F{post.date.month}\u002F{post.date.day}\u002F{post.slug}\"\n    \u003E\n      {post.title}\n    \u003C\u002Fa\u003E\n    \u003Cp class=\"blog-timestamp\"\u003E\n      Posted on {post.timestamp.toLocaleString()} by {post.author}\n    \u003C\u002Fp\u003E\n  \u003C\u002Fli\u003E\n  {\u002Feach}\n\u003C\u002Ful\u003E\n```\n\nListo.\n\n## Sitio estático\n\nAntes de desplegar nuestro fantástico blog, necesitamos asegurarnos que las páginas estáticas se generaran sin problemas. Para eso necesitamos ejecutar lo siguiente en la línea de comandos:\n\n```shell\n[user@host my-blog]$ npm run export\n[user@host my-blog]$ npx serve __sapper__\u002Fexport\n```\n\nSi no tienes ningun problema al acceder a este endpoint [\u002Fblog\u002F2020\u002F08\u002F08\u002Fhola-mundo](http:\u002F\u002Flocalhost:5000\u002Fblog\u002F2020\u002F08\u002F08\u002Fhola-mundo), ¡Felicidades! solo nos queda desplegar el sitio.\n\n\n## Despliegue: Github Pages\n\nNuestro sitio estático ha sido generado y los archivos están dentro de la carpeta `__sapper__\u002Fexport`. Existen una infinidad de servicios que te permiten almacenar y servir este tipo de sitios, entre los más populares tenemos Netlify o Github Pages. En este post te mostraré cómo hacerlo con _Github Pages_.\n\nPodríamos subir el folder `__sapper__\u002Fexport` a un nuevo repositorio, activar la opción _Github Pages_ y repetir este proceso manualmente cada vez que actualicemos nuestro sitio con un nuevo post. En mi opinión, hacerlo de manera manual le quita la diversión. Afortunadamente, exite _Github Actions_.\n\nEl primer paso es crear dos repositorios en _Github_, el primero es el repositorio de nuestro projecto y el segundo el repositorio al cuál subiremos nuestro sitio estático. En mi caso, [mariomenjr\u002Fmariomenjr](https:\u002F\u002Fgithub.com\u002Fmariomenjr\u002Fmariomenjr) y [mariomenjr\u002Fmariomenjr.github.io](https:\u002F\u002Fgithub.com\u002Fmariomenjr\u002Fmariomenjr.github.io) respectivamente. Una vez hecho esto, creamos los siguientes folders y archivos en el folder del projecto:\n\n```text\n...\n├ .github\n│ ├ workflows\n| | | deploy.yml\n├ src\n...\n```\n```yml\n# .github\u002Fworkflows\u002Fdeploy.yml\n\nname: Build and deploy\non:\n    push:\n      branches: \n        # Únicamente cuando actualicemos master\n        - master\njobs:\n  build-and-deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout 🛎️\n        uses: actions\u002Fcheckout@v2.3.1\n        with:\n          persist-credentials: false\n      - name: Install and build\n        run: |\n          npm install\n          npm run export\n      - name: Deploy 🚀\n        uses: JamesIves\u002Fgithub-pages-deploy-action@3.5.9\n        with:\n          # Limpiará el despliegue previo\n          CLEAN: true\n          # Necesitamos crear este secret para el repositorio\n          GITHUB_TOKEN: ${{ secrets.DEPLOY_MARIOMENJR }}\n          BRANCH: master\n          FOLDER: __sapper__\u002Fexport\n          BASE_BRANCH: master\n          REPOSITORY_NAME: mariomenjr\u002Fmariomenjr.github.io\n\n```\n\nEl archivo anterior se explica en la [documentación](https:\u002F\u002Fgithub.com\u002Fmarketplace\u002Factions\u002Fdeploy-to-github-pages) de la acción. En este post nos centraremos en un línea 1 línea: \n\n```yml\n...\njobs:\n  build-and-deploy:\n    ...\n    steps:\n      ...\n      - name: Deploy 🚀\n        ...\n        with:\n          ...\n          # Necesitamos crear este secret para el repositorio\n          GITHUB_TOKEN: ${{ secrets.DEPLOY_MARIOMENJR }}\n          ...\n```\n\nEs esta línea la que autoriza a la acción a hacer cambios al repositorio `mariomenjr\u002Fmariomenjr.github.io`.\n\nPara generar tu _Github token_, dirígete a [github.com\u002Fsettings\u002Ftokens](https:\u002F\u002Fgithub.com\u002Fsettings\u002Ftokens), haz clic en el botón `Generate new token`, escribe un nombre significativo en el campo `Note`, selecciona el _checkbox_ **_repo_** y, por último, haz clic en el botón `Generate token`.\n\n![Github personal access tokens](https:\u002F\u002Fimgur.com\u002FHbbMgm7.png)\n\nNo olvides copiar el token.\n\nPor último, dirígete al repositorio del projecto para crear la variable de entorno que incluirás en el archivo `deploy.yml`.\n\n![Add secret to repository](https:\u002F\u002Fimgur.com\u002FiuyGLdc.png)\n\n```yml\n...\njobs:\n  build-and-deploy:\n    ...\n    steps:\n      ...\n      - name: Deploy 🚀\n        ...\n        with:\n          ...\n          # Necesitamos crear este secret para el repositorio\n          GITHUB_TOKEN: ${{ secrets.MI_VARIABLE }}\n          ...\n```\n\nListo. Tan pronto hagas push al repositorio del projecto, _Github Actions_ desplegará tu sitio estático.\n\n![Github Action Deployment](https:\u002F\u002Fimgur.com\u002FfHxzGuf.png)\n\nNo olvides activar la opción Github Pages en el repositorio al que desplegaste el sitio.\n\n![Settings](https:\u002F\u002Fimgur.com\u002Ftkl8wSO.png)\n\n![Github Pages Setting](https:\u002F\u002Fimgur.com\u002F86osvtX.png)\n\n# Conclusión\n\nPuedes usar WordPress, Ghosts, incluso Jekyll si lo prefieres. El objetivo de este post es mostrarte como todas esas herramientas tienen su origen en cosas básicas que con el tiempo se convierten en herramientas robustas listas para sacarles provecho.\n\nMe decidí a construir este blog, de esta manera, para poner en práctica el concepto [Aprender en Público](https:\u002F\u002Fricardoerl.com\u002Fblog\u002Faprender-en-publico) que presentó [Ricardo](https:\u002F\u002Fricardoerl.com), un desarrollador salvadoreño, en un charla de [Café Digital](https:\u002F\u002Ftwitter.com\u002Fcafedigitalsv) y así salir de mi zona de comfort. Creéme cuando te digo que me divertí.\n\n\n# Referencias\n\n- [Building a blog with Svelte, Sapper, and Markdown](https:\u002F\u002Fwww.mahmoudashraf.dev\u002Fblog\u002Fbuild-a-blog-with-svelte-and-markdown\u002F) \n- [Sapper docs](https:\u002F\u002Fsapper.svelte.dev\u002Fdocs#How_it_works)\n- [Static Svelte: JavaScript Blogging with 93% less JavaScript](https:\u002F\u002Fwww.swyx.io\u002Fwriting\u002Fsvelte-static\u002F)\n- [Markdown](https:\u002F\u002Fes.wikipedia.org\u002Fwiki\u002FMarkdown)"}]}}("Mario Menjívar","https:\u002F\u002Fimgur.com\u002Fwm6iA0l.png"))]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.af735bb3.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main","/client/client.af735bb3.js")}document.head.appendChild(s)</script> 