<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <base href=/ > <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <link href=client/main.393438101.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>Cómo crear un blog a base de markdown y javascript by Mario Menjívar</title><noscript id=sapper-head-end></noscript> </head> <body class="box-border antialiased bg-white overflow-x-hidden text-gray-900"> <div id=sapper> <div class="box-border min-h-screen min-w-screen"><div class="flex justify-between flex-col h-100"><div><header class=px-4><div class="container mx-auto mt-2 px-2 py-4 sm:px-1 sm:py-2"><div class="flex flex-row items-center justify-between"><div class=inline-block><a href=/ ><div class="flex flex-row items-center"><img alt=@mariomenjr class="rounded-full sm:w-16 w-12" src="https://avatars3.githubusercontent.com/u/1946936?s=460&v=4"> <div class="flex flex-col ml-3"><span class="font-bold sm:text-xl text-grey-800 text-lg">Mario Menjívar</span> <span class="font-light text-grey-600 text-left text-xs">@mariomenjr</span></div></div></a></div> <div class=inline-block><div class="flex flex-row items-center"><a href=https://twitter.com/mariomenjr target=_blank><svg class="text-gray-900 fill-current h-6 w-6" viewBox="0 0 50 50" xmlns=http://www.w3.org/2000/svg><path d="M50.063 10.438a20.57 20.57 0 01-5.91 1.62 10.309 10.309 0
          004.523-5.687 20.648 20.648 0 01-6.531 2.492 10.258 10.258 0
          00-7.504-3.246c-5.68 0-10.286 4.602-10.286 10.281 0 .805.094 1.59.27
          2.344-8.547-.43-16.121-4.523-21.195-10.746a10.243 10.243 0 00-1.39
          5.172c0 3.566 1.812 6.715 4.573 8.562a10.274 10.274 0
          01-4.66-1.289v.13c0 4.984 3.547 9.136 8.246 10.085a10.29 10.29 0
          01-4.644.172c1.312 4.082 5.11 7.063 9.605 7.145A20.613 20.613 0 012.39
          41.87c-.831 0-1.648-.047-2.449-.144a29.053 29.053 0 0015.762
          4.62c18.914 0 29.258-15.667 29.258-29.253
          0-.446-.012-.895-.027-1.332a20.904 20.904 0 005.129-5.325z"></path></svg></a> <span class=w-5></span> <a href=https://linkedin.com/in/mariomenjr target=_blank><svg class="text-gray-900 fill-current h-6 w-6" viewBox="0 0 50 50" xmlns=http://www.w3.org/2000/svg><path d="M41 4H9C6.24 4 4 6.24 4 9v32c0 2.76 2.24 5 5 5h32c2.76 0 5-2.24
          5-5V9c0-2.76-2.24-5-5-5zM17 20v19h-6V20h6zm-6-5.53c0-1.4 1.2-2.47
          3-2.47s2.93 1.07 3 2.47c0 1.4-1.12 2.53-3 2.53-1.8 0-3-1.13-3-2.53zM39
          39h-6V29c0-2-1-4-3.5-4.04h-.08C27 24.96 26 27.02 26
          29v10h-6V20h6v2.56S27.93 20 31.81 20c3.97 0 7.19 2.73 7.19 8.26V39z"></path></svg></a></div></div></div></div></header> <nav class="px-4 border-b mt-2"><div class="container mx-auto"><div class="flex flex-row items-center justify-between"><ul class="flex flex-row items-center space-x-8"><li class="px-2 border-gray-900 py-2 border-b"><a href=/blog class="text-gray-900 font-light hover:text-black text-sm tracking-wide uppercase">blog</a> </li> </ul><ul class="flex flex-row items-center space-x-8"><li class="px-2 border-gray-900 py-2"><a href=/about class="text-gray-900 font-light hover:text-black text-sm tracking-wide uppercase">about</a> </li> </ul></div></div></nav></div> <div class="px-4 bg-gray-200"><div class="container mx-auto"><div class="gap-2 grid grid-cols-4"><div class="col-span-4 sm:col-span-3"><div class=box-border><main class=py-8> <p class=c-label-last-updated>Last updated on 8/8/2020, 5:23:17 PM by Mario Menjívar</p> <a href="https://twitter.com/share?ref_src=twsrc%5Etfw&text=hola&via=mariomenjr" class=twitter-share-button data-show-count=false>Tweet</a> <article class=c-article><h1 id=cómo-crear-un-blog-a-base-de-markdown-y-javascript>Cómo crear un blog a base de markdown y JavaScript</h1> <p>Seguramente te haz hecho la siguiente pregunta: ¿Cómo hostear mi blog sin pagar un centavo? En este post te explico una de tantas alternativas.</p> <h2 id=empecemos>Empecemos</h2> <p>Como ya mencioné, hay muchas formas de lograrlo. Fundamentalmente una página web no es más que HTML, CSS y JavaScript. Herramientas como <a href=https://jekyllrb.com/ >Jekyll</a> aprovecha esta regla de oro para ayudarte a generar y administrar posts fácilmente.</p> <p>Pero, ¿Qué pasa si queremos tomar ventaja de todas las herramientas disponibles en el ecosistema JavaScript que se han establecido en los últimos 10 años? Tengo 3 respuestas concretas a esa pregunta: <a href=https://www.gatsbyjs.org/ >Gatsby</a>, <a href=https://nextjs.org/ >Next.js</a> y <a href=https://sapper.svelte.dev/docs>Sapper</a>.</p> <p><em>In a nutshell</em>, estos tres frameworks permiten hacer algo muy importante para cumplir con nuestro objetivo, generar sitios estáticos. En este post nos centraremos en <em>Sapper</em>.</p> <h2 id=¿por-qué-sapper>¿Por qué Sapper?</h2> <p>Svelte es el nuevo chico de la cuadra. Su propuesta insignia es mover el proceso reactivo al lenguaje, sin mediadores del tipo Virtual DOM, cómo lo hace React o Vue. Esto disminuye el tamaño del <em>bundle</em> así cómo la velocidad de ejecución.</p> <p>Puedes echar un vistazo a la <a href=https://www.swyx.io/writing/svelte-static/ >comparativa</a> entre Gatsby y Sapper realizada por <a href=https://twitter.com/swyx>Shawn Wang</a>, un popular desarrollador en <a href=https://egghead.io/ >egghead.io</a>. Se muestra una reducción del 93% en el tamaño del <em>bundle</em> con Sapper.</p> <h2 id=setup>Setup</h2> <p>Para instalar Sapper, basta con ejecutar los siguientes comandos:</p> <pre class="overflow-x-auto language-bash"><code>[user@host ~]$ npx degit <span class=hljs-string>"sveltejs/sapper-template#rollup"</span> my-blog
[user@host ~]$ <span class=hljs-built_in>cd</span> my-blog
[user@host my-blog]$ npm install
[user@host my-blog]$ npm run dev</code></pre><p>En el folder del project <em>my-blog</em>, nos interesan los siguientes files:</p> <pre class="overflow-x-auto language-text"><code>...
├ src
│ ├ routes
| | ├ blog
| | | ├ _posts.js
| | | ├ [slug].json.js
| | | ├ [slug].svelte
| | | ├ index.json.js
| | | ├ index.svelte
...</code></pre><p>De paso creamos el siguiente directorio y archivo:</p> <pre class="overflow-x-auto language-text"><code>...
+ ├ content
+ │ ├ 2020-08-08_hola-mundo.md
  ├ src
  │ ├ routes
...</code></pre><p>Necesitamos instalar los siguientes paquetes:</p> <pre class="overflow-x-auto language-bash"><code>[user@host my-blog]$ npm i gray-matter highlight.js marked</code></pre><p>En mi caso, quiero que los posts estén ordenados por su fecha de publicación y que esto se refleje en la URL. Tendremos que hacer unos cambios a los archivos mencionados, primero renombramos dos archivos:</p> <pre class="overflow-x-auto language-text"><code>...
- | | | ├ [slug].json.js
- | | | ├ [slug].svelte
+ | | | ├ [...slug].json.js
+ | | | ├ [...slug].svelte
...</code></pre><p>Luego, reemplazamos el contenido de la siguiente manera:</p> <pre class="overflow-x-auto language-javascript"><code><span class=hljs-comment>// src/routes/blog/[...slug].json.js</span>

<span class=hljs-keyword>import</span> fs <span class=hljs-keyword>from</span> <span class=hljs-string>"fs"</span>;
<span class=hljs-keyword>import</span> path <span class=hljs-keyword>from</span> <span class=hljs-string>"path"</span>;
<span class=hljs-keyword>import</span> marked <span class=hljs-keyword>from</span> <span class=hljs-string>"marked"</span>;
<span class=hljs-keyword>import</span> hljs <span class=hljs-keyword>from</span> <span class=hljs-string>"highlight.js"</span>;
<span class=hljs-keyword>import</span> grayMatter <span class=hljs-keyword>from</span> <span class=hljs-string>"gray-matter"</span>;

<span class=hljs-comment>/*
 * Para obtener el contenido del post
 */</span>
<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>getPost</span>(<span class=hljs-params>year, month, day, fileName</span>) </span>{
  <span class=hljs-keyword>return</span> fs.readFileSync(
    path.resolve(<span class=hljs-string>"content"</span>, <span class=hljs-string>`<span class=hljs-subst>${year}</span>-<span class=hljs-subst>${month}</span>-<span class=hljs-subst>${day}</span>_<span class=hljs-subst>${fileName}</span>.md`</span>),
    <span class=hljs-string>"utf-8"</span>
  );
}

<span class=hljs-comment>/*
 * En Sapper, este método responde a una request a través del método GET
 * En nuestro caso, la request de un JSON
 */</span>
<span class=hljs-keyword>export</span> <span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>get</span>(<span class=hljs-params>req, res, next</span>) </span>{
  <span class=hljs-comment>// Así es cómo resolvemos una `dynamic route` en Sapper,</span>
  <span class=hljs-comment>// obtenemos cada valor en su variable respectiva</span>
  <span class=hljs-keyword>let</span> [year, month, day, slug] = req.params.slug;

  <span class=hljs-keyword>const</span> postMarkdown = getPost(year, month, day, slug);
  <span class=hljs-keyword>const</span> renderer = <span class=hljs-keyword>new</span> marked.Renderer();

  <span class=hljs-comment>// marked provee una manera de formatear partes específicas del markdown</span>
  <span class=hljs-comment>// en este caso, el código</span>
  renderer.code = <span class=hljs-function>(<span class=hljs-params>source, lang</span>) =></span> {
    <span class=hljs-keyword>const</span> { <span class=hljs-attr>value</span>: highlighted } = hljs.highlight(lang, source);
    <span class=hljs-keyword>return</span> <span class=hljs-string>`&lt;pre class='language-<span class=hljs-subst>${lang}</span> overflow-x-auto'>&lt;code><span class=hljs-subst>${highlighted}</span>&lt;/code>&lt;/pre>`</span>;
  };

  marked.use({ renderer });

  <span class=hljs-keyword>const</span> { data, content } = grayMatter(postMarkdown);
  <span class=hljs-keyword>const</span> html = marked(content);

  <span class=hljs-keyword>if</span> (html) {
    res.writeHead(<span class=hljs-number>200</span>, { <span class=hljs-string>"Content-Type"</span>: <span class=hljs-string>"application/json"</span> });
    res.end(<span class=hljs-built_in>JSON</span>.stringify({ html, ...data }));
  } <span class=hljs-keyword>else</span> {
    res.writeHead(<span class=hljs-number>404</span>, { <span class=hljs-string>"Content-Type"</span>: <span class=hljs-string>"application/json"</span> });
    res.end(<span class=hljs-built_in>JSON</span>.stringify({ <span class=hljs-attr>message</span>: <span class=hljs-string>`Not found`</span> }));
  }
}</code></pre><pre class="overflow-x-auto language-html"><code><span class=hljs-comment>&lt;!-- src/routes/blog/[...slug].svelte --></span>

<span class=hljs-tag>&lt;<span class=hljs-name>script</span> <span class=hljs-attr>context</span>=<span class=hljs-string>"module"</span>></span><span class=javascript>
  <span class=hljs-comment>/*
   * Este método representa un paso en el ciclo de vida de un component en Sapper.
   *
   * Únicamente se ejecuta cuando el componente es montado. Aquí haremos la petición de nuestro JSON con la información del post
   */</span>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>async</span> <span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>preload</span>(<span class=hljs-params>{ params }</span>) </span>{
    <span class=hljs-keyword>let</span> [year, month, day, slug] = params.slug;

    <span class=hljs-keyword>const</span> res = <span class=hljs-keyword>await</span> <span class=hljs-built_in>this</span>.fetch(<span class=hljs-string>`blog/<span class=hljs-subst>${year}</span>/<span class=hljs-subst>${month}</span>/<span class=hljs-subst>${day}</span>/<span class=hljs-subst>${slug}</span>.json`</span>);
    <span class=hljs-keyword>const</span> data = <span class=hljs-keyword>await</span> res.json();

    <span class=hljs-keyword>if</span> (res.status === <span class=hljs-number>200</span>) {
      <span class=hljs-keyword>return</span> { <span class=hljs-attr>post</span>: data };
    } <span class=hljs-keyword>else</span> {
      <span class=hljs-built_in>this</span>.error(res.status, data.message);
    }
  }
</span><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>script</span>></span><span class=javascript>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> post;
</span><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>svelte:head</span>></span>
  <span class=hljs-tag>&lt;<span class=hljs-name>title</span>></span>{post.title} by {post.author}<span class=hljs-tag>&lt;/<span class=hljs-name>title</span>></span>
<span class=hljs-tag>&lt;/<span class=hljs-name>svelte:head</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>article</span>></span>
  {@html post.html}
<span class=hljs-tag>&lt;/<span class=hljs-name>article</span>></span></code></pre><p>Acabamos de programar cómo se renderizará el post. Ya deberías poder verlo en <a href=http://localhost:3000/blog/2020/08/08/hola-mundo>/blog/2020/08/08/hola-mundo</a> en tu local.</p> <p>Podrías pensar que ya terminamos, pero hay un pequeño detalle que debemos cubrir para cumplir con las reglas de Sapper si queremos exportar nuestro pequeño blog como un sitio estático.</p> <blockquote> <p>"... any pages you want to be included in the exported site must either be reachable by &lt;a> elements or added to the --entry option of the sapper export command." at <a href=https://sapper.svelte.dev/docs#How_it_works>sapper-export</a></p> </blockquote> <p>De acuerdo a la documentación, debemos incluir elementos <strong>&lt;a></strong> que apunten a nuestras páginas generadas a partir de rutas dinámicas para que al exportar el sitio, estas también se incluyan. Por eso programaremos el endpoint <a href=http://localhost:3000/blog>/blog</a>.</p> <pre class="overflow-x-auto language-javascript"><code><span class=hljs-comment>// src/routes/blog/index.json.js</span>

<span class=hljs-keyword>import</span> fs <span class=hljs-keyword>from</span> <span class=hljs-string>"fs"</span>;
<span class=hljs-keyword>import</span> path <span class=hljs-keyword>from</span> <span class=hljs-string>"path"</span>;
<span class=hljs-keyword>import</span> grayMatter <span class=hljs-keyword>from</span> <span class=hljs-string>"gray-matter"</span>;

<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>getAllPosts</span>(<span class=hljs-params></span>) </span>{
  <span class=hljs-keyword>const</span> posts = fs
    .readdirSync(<span class=hljs-string>"content"</span>)
    .map(<span class=hljs-function>(<span class=hljs-params>fileName</span>) =></span> {
      <span class=hljs-keyword>const</span> post = fs.readFileSync(path.resolve(<span class=hljs-string>"content"</span>, fileName), <span class=hljs-string>"utf-8"</span>);
      <span class=hljs-keyword>return</span> grayMatter(post).data;
    })
    .sort(<span class=hljs-function>(<span class=hljs-params>a, b</span>) =></span> {
      <span class=hljs-keyword>if</span> (b.timestamp &lt; a.timestamp) <span class=hljs-keyword>return</span> <span class=hljs-number>-1</span>;
      <span class=hljs-keyword>if</span> (b.timestamp > a.timestamp) <span class=hljs-keyword>return</span> <span class=hljs-number>1</span>;

      <span class=hljs-keyword>return</span> <span class=hljs-number>0</span>;
    });
  <span class=hljs-keyword>return</span> posts;
}

<span class=hljs-keyword>export</span> <span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>get</span>(<span class=hljs-params>req, res</span>) </span>{
  res.writeHead(<span class=hljs-number>200</span>, { <span class=hljs-string>"Content-Type"</span>: <span class=hljs-string>"application/json"</span> });
  res.end(<span class=hljs-built_in>JSON</span>.stringify(getAllPosts()));
}</code></pre><pre class="overflow-x-auto language-html"><code><span class=hljs-comment>&lt;!-- src/routes/blog/index.svelte --></span>

<span class=hljs-tag>&lt;<span class=hljs-name>script</span> <span class=hljs-attr>context</span>=<span class=hljs-string>"module"</span>></span><span class=javascript>
  <span class=hljs-keyword>export</span> <span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>preload</span>(<span class=hljs-params>{ params, query }</span>) </span>{
    <span class=hljs-keyword>return</span> <span class=hljs-built_in>this</span>.fetch(<span class=hljs-string>`blog.json`</span>)
      .then(<span class=hljs-function>(<span class=hljs-params>r</span>) =></span> r.json())
      .then(<span class=hljs-function>(<span class=hljs-params>posts</span>) =></span> ({
        <span class=hljs-attr>posts</span>: posts.map(<span class=hljs-function>(<span class=hljs-params>post</span>) =></span> {
          <span class=hljs-keyword>const</span> timestamp = <span class=hljs-keyword>new</span> <span class=hljs-built_in>Date</span>(post.timestamp);
          <span class=hljs-keyword>return</span> {
            ...post,
            timestamp,
            <span class=hljs-attr>date</span>: {
              <span class=hljs-attr>year</span>: timestamp.getFullYear(),
              <span class=hljs-attr>month</span>: <span class=hljs-string>`<span class=hljs-subst>${timestamp.getMonth() + <span class=hljs-number>1</span>}</span>`</span>.padStart(<span class=hljs-number>2</span>, <span class=hljs-string>`0`</span>),
              <span class=hljs-attr>day</span>: <span class=hljs-string>`<span class=hljs-subst>${timestamp.getDate()}</span>`</span>.padStart(<span class=hljs-number>2</span>, <span class=hljs-string>`0`</span>),
            },
          };
        }),
      }));
  }
</span><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>script</span>></span><span class=javascript>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> posts;
</span><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>svelte:head</span>></span>
  <span class=hljs-tag>&lt;<span class=hljs-name>title</span>></span>Blog | Mario Menjívar<span class=hljs-tag>&lt;/<span class=hljs-name>title</span>></span>
<span class=hljs-tag>&lt;/<span class=hljs-name>svelte:head</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>ul</span>></span>
  {#each posts as post}
  <span class=hljs-tag>&lt;<span class=hljs-name>li</span>></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>a</span>
      <span class=hljs-attr>rel</span>=<span class=hljs-string>"prefetch"</span>
      <span class=hljs-attr>href</span>=<span class=hljs-string>"blog/{post.date.year}/{post.date.month}/{post.date.day}/{post.slug}"</span>
    ></span>
      {post.title}
    <span class=hljs-tag>&lt;/<span class=hljs-name>a</span>></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>p</span> <span class=hljs-attr>class</span>=<span class=hljs-string>"c-label-last-updated"</span>></span>
      Posted on {post.timestamp.toLocaleString()} by {post.author}
    <span class=hljs-tag>&lt;/<span class=hljs-name>p</span>></span>
  <span class=hljs-tag>&lt;/<span class=hljs-name>li</span>></span>
  {/each}
<span class=hljs-tag>&lt;/<span class=hljs-name>ul</span>></span></code></pre><p>Listo.</p> <h2 id=sitio-estático>Sitio estático</h2> <p>Antes de desplegar nuestro fantástico blog, necesitamos asegurarnos que las páginas estáticas se generaran sin problemas. Para eso necesitamos ejecutar lo siguiente en la línea de comandos:</p> <pre class="overflow-x-auto language-bash"><code>[user@host my-blog]$ npm run <span class=hljs-built_in>export</span>
[user@host my-blog]$ npx serve __sapper__/<span class=hljs-built_in>export</span></code></pre><p>Si no tienes ningun problema al acceder a este endpoint <a href=http://localhost:5000/blog/2020/08/08/hola-mundo>/blog/2020/08/08/hola-mundo</a>, ¡Felicidades! solo nos falta desplegar.</p> <h2 id=despliegue-github-pages>Despliegue: Github Pages</h2> <p>En este punto, podríamos copiar la carpeta __sapper__/export y llevarla a cualquier CDN para ser servido. Por ejemplo, Netlify o Github Pages. En este post te mostraré cómo hacerlo con Github Pages.</p> <p>... pero hacerlo de manera manual, en mi opinión, le quita la diversión.</p> </article></main></div></div> <div class="col-span-4 sm:col-span-1"><div class=box-border><main class=py-8><p class="text-xs text-gray-400 tracking-wide uppercase">No entries</main></div></div></div></div></div> <footer class="box-border border-t px-4"><div class="container mx-auto py-8 text-sm">2020 © Mario Menjívar</div></footer></div></div></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,{post:{html:"\u003Ch1 id=\"cómo-crear-un-blog-a-base-de-markdown-y-javascript\"\u003ECómo crear un blog a base de markdown y JavaScript\u003C\u002Fh1\u003E\n\u003Cp\u003ESeguramente te haz hecho la siguiente pregunta: ¿Cómo hostear mi blog sin pagar un centavo? En este post te explico una de tantas alternativas.\u003C\u002Fp\u003E\n\u003Ch2 id=\"empecemos\"\u003EEmpecemos\u003C\u002Fh2\u003E\n\u003Cp\u003EComo ya mencioné, hay muchas formas de lograrlo. Fundamentalmente una página web no es más que HTML, CSS y JavaScript. Herramientas como \u003Ca href=\"https:\u002F\u002Fjekyllrb.com\u002F\"\u003EJekyll\u003C\u002Fa\u003E aprovecha esta regla de oro para ayudarte a generar y administrar posts fácilmente.\u003C\u002Fp\u003E\n\u003Cp\u003EPero, ¿Qué pasa si queremos tomar ventaja de todas las herramientas disponibles en el ecosistema JavaScript que se han establecido en los últimos 10 años? Tengo 3 respuestas concretas a esa pregunta: \u003Ca href=\"https:\u002F\u002Fwww.gatsbyjs.org\u002F\"\u003EGatsby\u003C\u002Fa\u003E, \u003Ca href=\"https:\u002F\u002Fnextjs.org\u002F\"\u003ENext.js\u003C\u002Fa\u003E y \u003Ca href=\"https:\u002F\u002Fsapper.svelte.dev\u002Fdocs\"\u003ESapper\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cem\u003EIn a nutshell\u003C\u002Fem\u003E, estos tres frameworks permiten hacer algo muy importante para cumplir con nuestro objetivo, generar sitios estáticos. En este post nos centraremos en \u003Cem\u003ESapper\u003C\u002Fem\u003E.\u003C\u002Fp\u003E\n\u003Ch2 id=\"¿por-qué-sapper\"\u003E¿Por qué Sapper?\u003C\u002Fh2\u003E\n\u003Cp\u003ESvelte es el nuevo chico de la cuadra. Su propuesta insignia es mover el proceso reactivo al lenguaje, sin mediadores del tipo Virtual DOM, cómo lo hace React o Vue. Esto disminuye el tamaño del \u003Cem\u003Ebundle\u003C\u002Fem\u003E así cómo la velocidad de ejecución.\u003C\u002Fp\u003E\n\u003Cp\u003EPuedes echar un vistazo a la \u003Ca href=\"https:\u002F\u002Fwww.swyx.io\u002Fwriting\u002Fsvelte-static\u002F\"\u003Ecomparativa\u003C\u002Fa\u003E entre Gatsby y Sapper realizada por \u003Ca href=\"https:\u002F\u002Ftwitter.com\u002Fswyx\"\u003EShawn Wang\u003C\u002Fa\u003E, un popular desarrollador en \u003Ca href=\"https:\u002F\u002Fegghead.io\u002F\"\u003Eegghead.io\u003C\u002Fa\u003E. Se muestra una reducción del 93% en el tamaño del \u003Cem\u003Ebundle\u003C\u002Fem\u003E con Sapper.\u003C\u002Fp\u003E\n\u003Ch2 id=\"setup\"\u003ESetup\u003C\u002Fh2\u003E\n\u003Cp\u003EPara instalar Sapper, basta con ejecutar los siguientes comandos:\u003C\u002Fp\u003E\n\u003Cpre class='language-bash overflow-x-auto'\u003E\u003Ccode\u003E[user@host ~]$ npx degit \u003Cspan class=\"hljs-string\"\u003E&quot;sveltejs\u002Fsapper-template#rollup&quot;\u003C\u002Fspan\u003E my-blog\n[user@host ~]$ \u003Cspan class=\"hljs-built_in\"\u003Ecd\u003C\u002Fspan\u003E my-blog\n[user@host my-blog]$ npm install\n[user@host my-blog]$ npm run dev\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EEn el folder del project \u003Cem\u003Emy-blog\u003C\u002Fem\u003E, nos interesan los siguientes files:\u003C\u002Fp\u003E\n\u003Cpre class='language-text overflow-x-auto'\u003E\u003Ccode\u003E...\n├ src\n│ ├ routes\n| | ├ blog\n| | | ├ _posts.js\n| | | ├ [slug].json.js\n| | | ├ [slug].svelte\n| | | ├ index.json.js\n| | | ├ index.svelte\n...\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EDe paso creamos el siguiente directorio y archivo:\u003C\u002Fp\u003E\n\u003Cpre class='language-text overflow-x-auto'\u003E\u003Ccode\u003E...\n+ ├ content\n+ │ ├ 2020-08-08_hola-mundo.md\n  ├ src\n  │ ├ routes\n...\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003ENecesitamos instalar los siguientes paquetes:\u003C\u002Fp\u003E\n\u003Cpre class='language-bash overflow-x-auto'\u003E\u003Ccode\u003E[user@host my-blog]$ npm i gray-matter highlight.js marked\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EEn mi caso, quiero que los posts estén ordenados por su fecha de publicación y que esto se refleje en la URL. Tendremos que hacer unos cambios a los archivos mencionados, primero renombramos dos archivos:\u003C\u002Fp\u003E\n\u003Cpre class='language-text overflow-x-auto'\u003E\u003Ccode\u003E...\n- | | | ├ [slug].json.js\n- | | | ├ [slug].svelte\n+ | | | ├ [...slug].json.js\n+ | | | ├ [...slug].svelte\n...\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003ELuego, reemplazamos el contenido de la siguiente manera:\u003C\u002Fp\u003E\n\u003Cpre class='language-javascript overflow-x-auto'\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F src\u002Froutes\u002Fblog\u002F[...slug].json.js\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E fs \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E&quot;fs&quot;\u003C\u002Fspan\u003E;\n\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E path \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E&quot;path&quot;\u003C\u002Fspan\u003E;\n\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E marked \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E&quot;marked&quot;\u003C\u002Fspan\u003E;\n\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E hljs \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E&quot;highlight.js&quot;\u003C\u002Fspan\u003E;\n\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E grayMatter \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E&quot;gray-matter&quot;\u003C\u002Fspan\u003E;\n\n\u003Cspan class=\"hljs-comment\"\u003E\u002F*\n * Para obtener el contenido del post\n *\u002F\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003EgetPost\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Eyear, month, day, fileName\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n  \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E fs.readFileSync(\n    path.resolve(\u003Cspan class=\"hljs-string\"\u003E&quot;content&quot;\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E`\u003Cspan class=\"hljs-subst\"\u003E${year}\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-subst\"\u003E${month}\u003C\u002Fspan\u003E-\u003Cspan class=\"hljs-subst\"\u003E${day}\u003C\u002Fspan\u003E_\u003Cspan class=\"hljs-subst\"\u003E${fileName}\u003C\u002Fspan\u003E.md`\u003C\u002Fspan\u003E),\n    \u003Cspan class=\"hljs-string\"\u003E&quot;utf-8&quot;\u003C\u002Fspan\u003E\n  );\n}\n\n\u003Cspan class=\"hljs-comment\"\u003E\u002F*\n * En Sapper, este método responde a una request a través del método GET\n * En nuestro caso, la request de un JSON\n *\u002F\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Eget\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Ereq, res, next\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n  \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F Así es cómo resolvemos una `dynamic route` en Sapper,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F obtenemos cada valor en su variable respectiva\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E [year, month, day, slug] = req.params.slug;\n\n  \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E postMarkdown = getPost(year, month, day, slug);\n  \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E renderer = \u003Cspan class=\"hljs-keyword\"\u003Enew\u003C\u002Fspan\u003E marked.Renderer();\n\n  \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F marked provee una manera de formatear partes específicas del markdown\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F en este caso, el código\u003C\u002Fspan\u003E\n  renderer.code = \u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Esource, lang\u003C\u002Fspan\u003E) =&gt;\u003C\u002Fspan\u003E {\n    \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E { \u003Cspan class=\"hljs-attr\"\u003Evalue\u003C\u002Fspan\u003E: highlighted } = hljs.highlight(lang, source);\n    \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E`&lt;pre class=&#x27;language-\u003Cspan class=\"hljs-subst\"\u003E${lang}\u003C\u002Fspan\u003E overflow-x-auto&#x27;&gt;&lt;code&gt;\u003Cspan class=\"hljs-subst\"\u003E${highlighted}\u003C\u002Fspan\u003E&lt;\u002Fcode&gt;&lt;\u002Fpre&gt;`\u003C\u002Fspan\u003E;\n  };\n\n  marked.use({ renderer });\n\n  \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E { data, content } = grayMatter(postMarkdown);\n  \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E html = marked(content);\n\n  \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (html) {\n    res.writeHead(\u003Cspan class=\"hljs-number\"\u003E200\u003C\u002Fspan\u003E, { \u003Cspan class=\"hljs-string\"\u003E&quot;Content-Type&quot;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E&quot;application\u002Fjson&quot;\u003C\u002Fspan\u003E });\n    res.end(\u003Cspan class=\"hljs-built_in\"\u003EJSON\u003C\u002Fspan\u003E.stringify({ html, ...data }));\n  } \u003Cspan class=\"hljs-keyword\"\u003Eelse\u003C\u002Fspan\u003E {\n    res.writeHead(\u003Cspan class=\"hljs-number\"\u003E404\u003C\u002Fspan\u003E, { \u003Cspan class=\"hljs-string\"\u003E&quot;Content-Type&quot;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E&quot;application\u002Fjson&quot;\u003C\u002Fspan\u003E });\n    res.end(\u003Cspan class=\"hljs-built_in\"\u003EJSON\u003C\u002Fspan\u003E.stringify({ \u003Cspan class=\"hljs-attr\"\u003Emessage\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E`Not found`\u003C\u002Fspan\u003E }));\n  }\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cpre class='language-html overflow-x-auto'\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-comment\"\u003E&lt;!-- src\u002Froutes\u002Fblog\u002F[...slug].svelte --&gt;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Econtext\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E&quot;module&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"javascript\"\u003E\n  \u003Cspan class=\"hljs-comment\"\u003E\u002F*\n   * Este método representa un paso en el ciclo de vida de un component en Sapper.\n   *\n   * Únicamente se ejecuta cuando el componente es montado. Aquí haremos la petición de nuestro JSON con la información del post\n   *\u002F\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Epreload\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E{ params }\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n    \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E [year, month, day, slug] = params.slug;\n\n    \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E res = \u003Cspan class=\"hljs-keyword\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Ethis\u003C\u002Fspan\u003E.fetch(\u003Cspan class=\"hljs-string\"\u003E`blog\u002F\u003Cspan class=\"hljs-subst\"\u003E${year}\u003C\u002Fspan\u003E\u002F\u003Cspan class=\"hljs-subst\"\u003E${month}\u003C\u002Fspan\u003E\u002F\u003Cspan class=\"hljs-subst\"\u003E${day}\u003C\u002Fspan\u003E\u002F\u003Cspan class=\"hljs-subst\"\u003E${slug}\u003C\u002Fspan\u003E.json`\u003C\u002Fspan\u003E);\n    \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E data = \u003Cspan class=\"hljs-keyword\"\u003Eawait\u003C\u002Fspan\u003E res.json();\n\n    \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (res.status === \u003Cspan class=\"hljs-number\"\u003E200\u003C\u002Fspan\u003E) {\n      \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E { \u003Cspan class=\"hljs-attr\"\u003Epost\u003C\u002Fspan\u003E: data };\n    } \u003Cspan class=\"hljs-keyword\"\u003Eelse\u003C\u002Fspan\u003E {\n      \u003Cspan class=\"hljs-built_in\"\u003Ethis\u003C\u002Fspan\u003E.error(res.status, data.message);\n    }\n  }\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"javascript\"\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E post;\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Esvelte:head\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Etitle\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E{post.title} by {post.author}\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Etitle\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Esvelte:head\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Earticle\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n  {@html post.html}\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Earticle\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EAcabamos de programar cómo se renderizará el post. Ya deberías poder verlo en \u003Ca href=\"http:\u002F\u002Flocalhost:3000\u002Fblog\u002F2020\u002F08\u002F08\u002Fhola-mundo\"\u003E\u002Fblog\u002F2020\u002F08\u002F08\u002Fhola-mundo\u003C\u002Fa\u003E en tu local.\u003C\u002Fp\u003E\n\u003Cp\u003EPodrías pensar que ya terminamos, pero hay un pequeño detalle que debemos cubrir para cumplir con las reglas de Sapper si queremos exportar nuestro pequeño blog como un sitio estático.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003E&quot;... any pages you want to be included in the exported site must either be reachable by &lt;a&gt; elements or added to the --entry option of the sapper export command.&quot;\nat \u003Ca href=\"https:\u002F\u002Fsapper.svelte.dev\u002Fdocs#How_it_works\"\u003Esapper-export\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003EDe acuerdo a la documentación, debemos incluir elementos \u003Cstrong\u003E&lt;a&gt;\u003C\u002Fstrong\u003E que apunten a nuestras páginas generadas a partir de rutas dinámicas para que al exportar el sitio, estas también se incluyan. Por eso programaremos el endpoint \u003Ca href=\"http:\u002F\u002Flocalhost:3000\u002Fblog\"\u003E\u002Fblog\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003Cpre class='language-javascript overflow-x-auto'\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F src\u002Froutes\u002Fblog\u002Findex.json.js\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E fs \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E&quot;fs&quot;\u003C\u002Fspan\u003E;\n\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E path \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E&quot;path&quot;\u003C\u002Fspan\u003E;\n\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E grayMatter \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E&quot;gray-matter&quot;\u003C\u002Fspan\u003E;\n\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003EgetAllPosts\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n  \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E posts = fs\n    .readdirSync(\u003Cspan class=\"hljs-string\"\u003E&quot;content&quot;\u003C\u002Fspan\u003E)\n    .map(\u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003EfileName\u003C\u002Fspan\u003E) =&gt;\u003C\u002Fspan\u003E {\n      \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E post = fs.readFileSync(path.resolve(\u003Cspan class=\"hljs-string\"\u003E&quot;content&quot;\u003C\u002Fspan\u003E, fileName), \u003Cspan class=\"hljs-string\"\u003E&quot;utf-8&quot;\u003C\u002Fspan\u003E);\n      \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E grayMatter(post).data;\n    })\n    .sort(\u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Ea, b\u003C\u002Fspan\u003E) =&gt;\u003C\u002Fspan\u003E {\n      \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (b.timestamp &lt; a.timestamp) \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E-1\u003C\u002Fspan\u003E;\n      \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (b.timestamp &gt; a.timestamp) \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E;\n\n      \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E;\n    });\n  \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E posts;\n}\n\n\u003Cspan class=\"hljs-keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Eget\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Ereq, res\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n  res.writeHead(\u003Cspan class=\"hljs-number\"\u003E200\u003C\u002Fspan\u003E, { \u003Cspan class=\"hljs-string\"\u003E&quot;Content-Type&quot;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E&quot;application\u002Fjson&quot;\u003C\u002Fspan\u003E });\n  res.end(\u003Cspan class=\"hljs-built_in\"\u003EJSON\u003C\u002Fspan\u003E.stringify(getAllPosts()));\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cpre class='language-html overflow-x-auto'\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-comment\"\u003E&lt;!-- src\u002Froutes\u002Fblog\u002Findex.svelte --&gt;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Econtext\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E&quot;module&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"javascript\"\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Epreload\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E{ params, query }\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n    \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Ethis\u003C\u002Fspan\u003E.fetch(\u003Cspan class=\"hljs-string\"\u003E`blog.json`\u003C\u002Fspan\u003E)\n      .then(\u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Er\u003C\u002Fspan\u003E) =&gt;\u003C\u002Fspan\u003E r.json())\n      .then(\u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Eposts\u003C\u002Fspan\u003E) =&gt;\u003C\u002Fspan\u003E ({\n        \u003Cspan class=\"hljs-attr\"\u003Eposts\u003C\u002Fspan\u003E: posts.map(\u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Epost\u003C\u002Fspan\u003E) =&gt;\u003C\u002Fspan\u003E {\n          \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E timestamp = \u003Cspan class=\"hljs-keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003EDate\u003C\u002Fspan\u003E(post.timestamp);\n          \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E {\n            ...post,\n            timestamp,\n            \u003Cspan class=\"hljs-attr\"\u003Edate\u003C\u002Fspan\u003E: {\n              \u003Cspan class=\"hljs-attr\"\u003Eyear\u003C\u002Fspan\u003E: timestamp.getFullYear(),\n              \u003Cspan class=\"hljs-attr\"\u003Emonth\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E`\u003Cspan class=\"hljs-subst\"\u003E${timestamp.getMonth() + \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E}\u003C\u002Fspan\u003E`\u003C\u002Fspan\u003E.padStart(\u003Cspan class=\"hljs-number\"\u003E2\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E`0`\u003C\u002Fspan\u003E),\n              \u003Cspan class=\"hljs-attr\"\u003Eday\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E`\u003Cspan class=\"hljs-subst\"\u003E${timestamp.getDate()}\u003C\u002Fspan\u003E`\u003C\u002Fspan\u003E.padStart(\u003Cspan class=\"hljs-number\"\u003E2\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E`0`\u003C\u002Fspan\u003E),\n            },\n          };\n        }),\n      }));\n  }\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan class=\"javascript\"\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E posts;\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Esvelte:head\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Etitle\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003EBlog | Mario Menjívar\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Etitle\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Esvelte:head\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eul\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n  {#each posts as post}\n  \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Eli\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ea\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-attr\"\u003Erel\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E&quot;prefetch&quot;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-attr\"\u003Ehref\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E&quot;blog\u002F{post.date.year}\u002F{post.date.month}\u002F{post.date.day}\u002F{post.slug}&quot;\u003C\u002Fspan\u003E\n    &gt;\u003C\u002Fspan\u003E\n      {post.title}\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ea\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u003Cspan class=\"hljs-name\"\u003Ep\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E&quot;c-label-last-updated&quot;\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n      Posted on {post.timestamp.toLocaleString()} by {post.author}\n    \u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Ep\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Eli\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\n  {\u002Feach}\n\u003Cspan class=\"hljs-tag\"\u003E&lt;\u002F\u003Cspan class=\"hljs-name\"\u003Eul\u003C\u002Fspan\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EListo.\u003C\u002Fp\u003E\n\u003Ch2 id=\"sitio-estático\"\u003ESitio estático\u003C\u002Fh2\u003E\n\u003Cp\u003EAntes de desplegar nuestro fantástico blog, necesitamos asegurarnos que las páginas estáticas se generaran sin problemas. Para eso necesitamos ejecutar lo siguiente en la línea de comandos:\u003C\u002Fp\u003E\n\u003Cpre class='language-bash overflow-x-auto'\u003E\u003Ccode\u003E[user@host my-blog]$ npm run \u003Cspan class=\"hljs-built_in\"\u003Eexport\u003C\u002Fspan\u003E\n[user@host my-blog]$ npx serve __sapper__\u002F\u003Cspan class=\"hljs-built_in\"\u003Eexport\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003ESi no tienes ningun problema al acceder a este endpoint \u003Ca href=\"http:\u002F\u002Flocalhost:5000\u002Fblog\u002F2020\u002F08\u002F08\u002Fhola-mundo\"\u003E\u002Fblog\u002F2020\u002F08\u002F08\u002Fhola-mundo\u003C\u002Fa\u003E, ¡Felicidades! solo nos falta desplegar.\u003C\u002Fp\u003E\n\u003Ch2 id=\"despliegue-github-pages\"\u003EDespliegue: Github Pages\u003C\u002Fh2\u003E\n\u003Cp\u003EEn este punto, podríamos copiar la carpeta __sapper__\u002Fexport y llevarla a cualquier CDN para ser servido. Por ejemplo, Netlify o Github Pages. En este post te mostraré cómo hacerlo con Github Pages.\u003C\u002Fp\u003E\n\u003Cp\u003E... pero hacerlo de manera manual, en mi opinión, le quita la diversión.\u003C\u002Fp\u003E\n",author:"Mario Menjívar",slug:"como-crear-un-blog-a-base-de-markdown-y-javascript",title:"Cómo crear un blog a base de markdown y javascript",timestamp:"2020-08-08T10:23:17.000-07:00"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.a0d41304.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main","/client/client.a0d41304.js")}document.head.appendChild(s)</script> 